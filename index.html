<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <meta name="naver-site-verification" content="a8106e0cbefd36468e543556b1a32d52aa11f6a6" />
  <title>Key Therapy - 온라인 타자연습</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600;700&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* --- 기본 다크 테마 변수 --- */
      --bg-main: #201e1c;
      --bg-container: #2a2826;
      --bg-typing-area: #262422;
      --bg-progress-bar: var(--accent-secondary);
      --bg-progress-bar-track: #44403d;

      --text-primary: #e8e0d8;
      --text-secondary: #b2aca2;

      --accent-primary: #d4af7a;
      --accent-secondary: #c8a273;
      --accent-active: #b89263;
      --accent-darker: #aa8a5a; /* Generally for light themes, but good to have */

      --highlight-error: #f48fb1;
      --highlight-error-bg: rgba(244, 143, 177, 0.1);

      --input-bg: #33302e;
      --input-text: #f5f0eb;
      --input-border: #4a4643;
      --input-focus-shadow: 0 0 10px rgba(var(--accent-rgb), 0.45);

      --button-text: #2f2c2a; /* For buttons with light/non-accent bg */
      --button-text-on-accent: #332e2a; /* For buttons with accent bg */

      --current-line-bg: rgba(var(--accent-rgb), 0.08);
      --current-line-text: var(--text-primary);
      --current-line-typed-text: var(--accent-primary);
      --current-line-border: rgba(var(--accent-rgb), 0.35);
      --current-line-shadow: 0 2px 12px rgba(var(--accent-rgb),0.12);

      --font-body: 'Noto Sans KR', sans-serif;
      --font-heading: 'Playfair Display', serif;
      --font-typing: 'Nanum Myeongjo', 'Courier New', monospace;
      --font-ui: 'Poppins', sans-serif;

      --line-height-typing: 1.8;
      --font-size-typing: 1.15rem;
      --font-size-typing-mobile: 1.05rem;

      --accent-rgb: 212, 175, 122; /* Dark theme accent */
      --accent-primary-rgb: 212, 175, 122; /* Dark theme accent */

      --hero-image-url: url('https://images.unsplash.com/photo-1505322265381-3138d62ub20a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGtleWJvYXJkJTIwYWVzdGhldGljfGVufDB8fDB8fHww&auto=format&fit=crop&w=1000&q=80');

      --typing-letter-spacing: 0.8px;
      --typing-word-spacing: 2px;
      --typing-letter-spacing-mobile: 0.5px;
      --typing-word-spacing-mobile: 1.5px;

      --border-radius-main: 12px;
      --border-radius-small: 8px;
      --shadow-soft: 0 10px 30px rgba(0,0,0,0.4);
      --shadow-inset: inset 0 2px 5px rgba(0,0,0,0.25);
      --shadow-button: 0 5px 12px rgba(0,0,0,0.28);
      --shadow-button-hover: 0 7px 15px rgba(0,0,0,0.32);
    }

    .light-theme { /* 아이보리 테마 */
      --bg-main: #fdfaf6;
      --bg-container: #fff;
      --bg-typing-area: #f9f5f0;
      --bg-progress-bar: #c0a580;
      --bg-progress-bar-track: #ede7de;
      --text-primary: #524a42;
      --text-secondary: #756A5F;
      --accent-primary: #b89a6c;
      --accent-secondary: #c8ad82;
      --accent-active: #a88a5c;
      --accent-darker: #987b4f; /* Used for hero title, stats value etc */
      --accent-rgb: 184, 154, 108;
      --accent-primary-rgb: 184, 154, 108;
      --input-bg: #fefcf9;
      --input-text: #4a4037;
      --input-border: #dcd3c9;
      --input-focus-shadow: 0 0 8px rgba(var(--accent-rgb), 0.25);
      --button-text: #4a4037;
      --button-text-on-accent: #fefcf9;
      --current-line-bg: rgba(var(--accent-rgb), 0.06);
      --current-line-text: #504840;
      --current-line-typed-text: var(--accent-active);
      --current-line-border: rgba(var(--accent-rgb), 0.25);
      --current-line-shadow: 0 2px 8px rgba(var(--accent-rgb),0.1);
      --highlight-error: #d3546d;
      --highlight-error-bg: rgba(211, 84, 109, 0.07);
      --shadow-soft: 0 6px 20px rgba(170, 150, 130, 0.08);
      --shadow-inset: inset 0 1px 2px rgba(0,0,0,0.025);
      --shadow-button: 0 3px 8px rgba(170, 150, 130, 0.07);
      --shadow-button-hover: 0 5px 12px rgba(170, 150, 130, 0.1);
    }

    .pink-theme {
      --bg-main: #fff0f5; /* LavenderBlush - very light pink */
      --bg-container: #ffffff; /* White */
      --bg-typing-area: #fff5f8; /* Slightly more saturated light pink */
      --bg-progress-bar: var(--accent-secondary);
      --bg-progress-bar-track: #ffe0e9; /* Light pink track */

      --text-primary: #4F333D; /* Dark Puce / Rose Taupe */
      --text-secondary: #735A64; /* Lighter Rose Taupe */

      --accent-primary: #E85D75; /* Watermelon Red / Strong Pink */
      --accent-secondary: #F080A0; /* Lighter, softer pink (Wild Strawberry) */
      --accent-active: #D94F6A; /* Darker active pink */
      --accent-darker: #C9405A; /* For titles, values etc. */

      --highlight-error: #FF6347; /* Tomato */
      --highlight-error-bg: rgba(255, 99, 71, 0.1);

      --input-bg: #fffafa; /* Snow - almost white with pink tint */
      --input-text: #4F333D;
      --input-border: #f8d0da; /* Pinkish border */
      --input-focus-shadow: 0 0 10px rgba(var(--accent-rgb), 0.35);

      --button-text: #4F333D;
      --button-text-on-accent: #ffffff;

      --current-line-bg: rgba(var(--accent-rgb), 0.1);
      --current-line-text: #4F333D;
      --current-line-typed-text: var(--accent-primary);
      --current-line-border: rgba(var(--accent-rgb), 0.3);
      --current-line-shadow: 0 2px 10px rgba(var(--accent-rgb),0.15);

      --accent-rgb: 232, 93, 117; /* Pink theme accent (E85D75) */
      --accent-primary-rgb: 232, 93, 117;

      --shadow-soft: 0 8px 25px rgba(200, 130, 150, 0.2); /* Softer, pinkish shadow */
      --shadow-inset: inset 0 1px 3px rgba(0,0,0,0.05);
      --shadow-button: 0 4px 10px rgba(200, 130, 150, 0.18);
      --shadow-button-hover: 0 6px 13px rgba(200, 130, 150, 0.22);
    }


    html { scroll-behavior: smooth; }
    body {
      background: var(--bg-main); font-family: var(--font-body); font-weight: 300;
      margin: 0; padding: 0; color: var(--text-primary); display: flex;
      flex-direction: column; min-height: 100vh; opacity: 0;
      animation: fadeInPage 0.8s 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      -webkit-tap-highlight-color: transparent;
      line-height: 1.65;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    @keyframes fadeInPage { to { opacity: 1; } }

    ::-webkit-scrollbar { width: 9px; }
    ::-webkit-scrollbar-track { background: var(--bg-typing-area); }
    ::-webkit-scrollbar-thumb { background: var(--accent-secondary); border-radius: 5px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent-primary); }

    .main-content-wrapper {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        flex-grow: 1;
        padding: 25px 15px;
    }
    .main-content {
      max-width: 1000px;
      width: 100%; background-color: var(--bg-container);
      border-radius: var(--border-radius-main); box-shadow: var(--shadow-soft);
      display: flex; flex-direction: column; overflow: hidden;
      border: 1px solid rgba(var(--accent-primary-rgb), 0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .light-theme .main-content {
        border-color: rgba(var(--accent-rgb), 0.18);
    }
    .pink-theme .main-content {
        border-color: rgba(var(--accent-rgb), 0.25); /* Pinkish border */
    }


    .hero-section {
      width: 100%;
      padding: 35px 25px;
      background-image:
        linear-gradient(to bottom, rgba(var(--bg-container-rgb, 42, 40, 38), 0.2) 0%, rgba(var(--bg-container-rgb, 42, 40, 38), 0.9) 100%), /* Default dark */
        var(--hero-image-url);
      background-size: cover; background-position: center 25%;
      display: flex; flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center; position: relative; border-radius: var(--border-radius-main) var(--border-radius-main) 0 0;
      box-sizing: border-box;
      border-bottom: 1px solid rgba(var(--accent-primary-rgb), 0.15);
    }
    .light-theme .hero-section {
        background-image:
            linear-gradient(to bottom, rgba(var(--accent-rgb),0.02) 0%, rgba(255,255,255, 0.92) 100%), /* Light theme: accent to white */
            var(--hero-image-url);
        border-bottom-color: rgba(var(--accent-rgb), 0.2);
    }
    .pink-theme .hero-section {
      background-image:
        linear-gradient(to bottom, rgba(255,240,245,0.1) 0%, rgba(255,245,248, 0.95) 100%), /* Pink theme: very light pink to slightly more opaque light pink */
        var(--hero-image-url);
      border-bottom-color: rgba(var(--accent-rgb), 0.25);
    }

    .hero-title {
      font-family: var(--font-heading); font-size: 2.6em;  font-weight: 700;
      color: var(--accent-primary); margin: 0 0 6px 0;
      text-shadow:
        0 0 15px rgba(var(--accent-primary-rgb), 0.35),
        0 2px 4px rgba(0,0,0,0.5);
      z-index: 1;
    }
    .hero-tagline {
      font-family: var(--font-body); font-size: 0.95em; font-weight: 400;
      color: var(--text-secondary);
      text-shadow: 0 1px 2px rgba(0,0,0,0.25);
      max-width: 80%;
      margin-left: auto;
      margin-right: auto;
    }

    .light-theme .hero-title, .pink-theme .hero-title {
        color: var(--accent-darker); /* Use accent-darker for light/pink themes */
    }
    .light-theme .hero-title {
        text-shadow: 0 0 12px rgba(var(--accent-rgb),0.2), 0 1px 2px rgba(0,0,0,0.1);
    }
    .pink-theme .hero-title {
        text-shadow: 0 0 12px rgba(var(--accent-rgb),0.25), 0 1px 2px rgba(100,50,60,0.15); /* Softer, pinkish shadow */
    }
    .light-theme .hero-tagline {
        color: var(--text-secondary);
        text-shadow: 0 1px 2px rgba(0,0,0,0.08);
    }
    .pink-theme .hero-tagline {
        color: var(--text-secondary);
        text-shadow: 0 1px 2px rgba(100,50,60,0.1);
    }


    .controls-and-stats-wrapper { padding: 25px 25px 15px; }
    .settings-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 18px;
    }

    .main-controls {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
    }

    .control-button-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .control-button-group button {
      padding: 10px 15px;
      font-size: 0.9em;
      border-radius: var(--border-radius-small);
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      font-family: var(--font-ui);
      font-weight: 500;
      letter-spacing: 0.25px;
      outline: none;
      flex-grow: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1.5px solid var(--accent-secondary);
      background: transparent;
      color: var(--accent-secondary);
      text-shadow: none;
      box-shadow: none;
    }
    .control-button-group button:hover {
      background: var(--accent-secondary);
      color: var(--button-text-on-accent);
      border-color: var(--accent-secondary);
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(var(--accent-rgb),0.15);
    }
    .control-button-group button.active {
      background: var(--accent-primary);
      color: var(--button-text-on-accent);
      border-color: var(--accent-primary);
      font-weight: 600;
      box-shadow: 0 1px 4px rgba(var(--accent-rgb),0.2), inset 0 1px 1px rgba(0,0,0,0.05);
      transform: translateY(0);
    }
    .control-button-group button.active:hover {
        background: var(--accent-active);
        border-color: var(--accent-active);
    }
    .control-button-group button i {
      margin-right: 7px;
      opacity: 0.75;
      font-size: 0.95em;
      line-height: 1;
    }
    .control-button-group button.active i {
      opacity: 1;
    }

    /* Light & Pink theme button adjustments */
    .light-theme .control-button-group button,
    .pink-theme .control-button-group button {
        border-color: var(--accent-secondary);
        color: var(--accent-secondary);
    }
    .light-theme .control-button-group button:hover,
    .pink-theme .control-button-group button:hover {
        background: var(--accent-secondary);
        color: var(--button-text-on-accent);
        border-color: var(--accent-secondary);
        box-shadow: var(--shadow-button-hover);
    }
    .light-theme .control-button-group button.active,
    .pink-theme .control-button-group button.active {
        background: var(--accent-primary);
        color: var(--button-text-on-accent);
        border-color: var(--accent-primary);
        box-shadow: var(--shadow-button), inset 0 1px 1px rgba(0,0,0,0.03);
    }
     .light-theme .control-button-group button.active:hover,
     .pink-theme .control-button-group button.active:hover {
        background: var(--accent-active);
        border-color: var(--accent-active);
    }

    .practice-mode-controls {
        composes: control-button-group;
        flex-basis: 100%;
        order: 1;
    }
    .practice-mode-controls button { min-width: 100px; }

    .feature-toggles {
        composes: control-button-group;
        gap: 10px;
        justify-content: flex-start;
        order: 2;
        flex-grow: 1;
    }
    .feature-toggles button { border-radius: 20px; min-width: 120px; }


    .sound-settings, .theme-settings {
        display: flex;
        align-items: center;
        gap: 8px;
        order: 3;
        flex-shrink: 0;
    }
    .select-label { font-size: 0.9em; color: var(--text-secondary); font-weight: 400; }
    #soundPackSelect, #themeSelect {
        background-color: var(--input-bg); color: var(--input-text);
        border: 1px solid var(--input-border); border-radius: var(--border-radius-small);
        padding: 9px 12px;
        font-family: var(--font-ui); font-size: 0.9em;
        outline: none; min-width: 140px;
        transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease, color 0.3s ease;
        box-shadow: var(--shadow-inset);
    }
    #soundPackSelect:focus, #themeSelect:focus {
      border-color: var(--accent-active);
      box-shadow: var(--input-focus-shadow), var(--shadow-inset);
    }

    #stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 10px;
      margin-bottom: 18px;
      padding: 15px 18px;
      background-color: rgba(var(--accent-rgb), 0.03); /* Default for Dark */
      border-radius: var(--border-radius-small); font-size: 0.92em; color: var(--text-secondary);
      border: 1px solid rgba(var(--accent-rgb), 0.1); /* Default for Dark */
      box-shadow: var(--shadow-inset);
      transition: opacity 0.3s ease, max-height 0.4s ease, margin-bottom 0.4s ease, padding 0.4s ease, visibility 0.4s ease, border-width 0.4s ease;
      max-height: 200px;
      overflow: hidden;
    }
    #stats.hidden {
        opacity: 0; max-height: 0; padding-top: 0; padding-bottom: 0;
        margin-bottom: 0; border-width: 0; visibility: hidden;
    }
    .light-theme #stats {
        background-color: rgba(var(--accent-rgb), 0.05);
        border-color: rgba(var(--accent-rgb), 0.12);
    }
    .pink-theme #stats {
        background-color: rgba(var(--accent-rgb), 0.06); /* Lighter pink bg */
        border-color: rgba(var(--accent-rgb), 0.15); /* Pinkish border */
    }


    #stats span { text-align: center; padding: 8px 5px; }
    #stats .label {
        color: var(--text-secondary); font-weight: 500; display: block;
        margin-bottom: 6px; font-size: 0.88em; text-transform: uppercase; letter-spacing: 0.5px;
    }
    #stats .value {
        color: var(--accent-primary); /* Default for Dark */
        font-weight: 600; font-size: 1.2em;
        font-family: var(--font-ui); line-height: 1.1;
    }
    .light-theme #stats .value, .pink-theme #stats .value {
        color: var(--accent-darker); /* Use accent-darker for light/pink themes */
    }


    .progress-bar-container {
        width: 100%; max-width: 700px; height: 5px;
        background-color: var(--bg-progress-bar-track);
        border-radius: 2.5px; margin: 8px auto 12px;
        overflow: hidden; display: none;
    }
    .progress-bar {
        height: 100%; width: 0%;
        background-color: var(--bg-progress-bar);
        border-radius: 2.5px; transition: width 0.25s ease-out;
    }


    .typing-area-container {
        padding: 20px 25px 28px;
        background-color: var(--bg-typing-area);
        border-top: 1px solid rgba(var(--accent-primary-rgb), 0.1); /* Default for Dark */
        flex-grow: 1; display: flex;
        flex-direction: column; font-family: var(--font-typing);
        font-size: var(--font-size-typing); line-height: var(--line-height-typing);
        border-radius: 0 0 var(--border-radius-main) var(--border-radius-main); min-height: 330px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .light-theme .typing-area-container {
        border-top-color: rgba(var(--accent-rgb),0.15);
    }
    .pink-theme .typing-area-container {
        border-top-color: rgba(var(--accent-rgb),0.2); /* Pinkish border */
    }


    #line-display-area {
        display: flex; flex-direction: column; align-items: center;
        margin-bottom: 0px;
        width: 100%;
        min-height: calc((var(--font-size-typing) * var(--line-height-typing) + 8px) * 2);
    }
    .typing-line, #typing-input-field {
        width: 100%; max-width: 700px;
        padding: 12px 16px;
        margin: 1px auto;
        font-family: var(--font-typing);
        font-size: var(--font-size-typing);
        line-height: var(--line-height-typing);
        letter-spacing: var(--typing-letter-spacing);
        word-spacing: var(--typing-word-spacing);
        box-sizing: border-box;
        text-align: left;
        border-radius: var(--border-radius-small);
    }
    .typing-line {
        transition: opacity 0.3s ease, font-size 0.25s ease, color 0.25s ease, background-color 0.25s ease, box-shadow 0.25s ease;
        min-height: calc(var(--font-size-typing) * var(--line-height-typing) + 24px);
        display: flex; align-items: center; font-weight: 400;
        background-color: transparent;
    }
    .typing-line strong { font-weight: 700; color: var(--current-line-typed-text); }
    .typing-line .untyped-char { opacity: 0.7; color: var(--text-secondary); }

    .typing-line.passed,
    #upcoming-lines-area .typing-line {
        color: var(--text-secondary);
        opacity: 0.55; /* Default for Dark */
        font-size: calc(var(--font-size-typing) * 0.92);
        background-color: transparent !important;
        border: none !important;
        box-shadow: none !important;
    }
    .light-theme .typing-line.passed,
    .light-theme #upcoming-lines-area .typing-line,
    .pink-theme .typing-line.passed,
    .pink-theme #upcoming-lines-area .typing-line {
        color: var(--text-secondary);
        opacity: 0.7; /* Slightly more visible for light/pink */
    }


    .typing-line.current-to-type {
        color: var(--current-line-text);
        background-color: var(--current-line-bg);
        border: 1px solid var(--current-line-border);
        font-weight: 500;
        margin-bottom: 6px;
        box-shadow: var(--current-line-shadow);
        transform: scale(1.0);
    }
    .light-theme .typing-line.current-to-type strong,
    .pink-theme .typing-line.current-to-type strong {
        color: var(--accent-darker); /* Use accent-darker for typed text in light/pink */
    }

    .light-theme .typing-line.current-to-type .untyped-char,
    .pink-theme .typing-line.current-to-type .untyped-char {
        color: var(--text-secondary);
        opacity: 0.85; /* Opacity increased for better visibility */
    }


    #typing-input-field-container {
      width: 100%; max-width: 700px;
      margin: 2px auto 0 auto;
    }
    #typing-input-field {
        background-color: var(--input-bg);
        color: var(--input-text);
        border: 1px solid var(--input-border);
        font-weight: 400;
        transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, border-top-color 0.2s ease, border-top-style 0.2s ease;
        -webkit-appearance: none; appearance: none;
        min-height: calc(var(--font-size-typing) * var(--line-height-typing) + 24px + 2px);
        box-shadow: var(--shadow-inset);
        border-top: 1px solid transparent;
    }
    #typing-input-field:focus {
        border-color: var(--accent-active);
        border-top-color: var(--accent-active);
        box-shadow: var(--input-focus-shadow), var(--shadow-inset);
        background-color: var(--input-bg);
        outline: none;
    }

    .highlight {
        font-weight: inherit !important;
        color: var(--highlight-error) !important;
        background-color: var(--highlight-error-bg);
        border-radius: 3px; padding: 0.5px 0; margin: -0.5px 0;
    }
    .light-theme .highlight {
        box-shadow: 0 0 4px rgba(211, 84, 109, 0.15); /* Using the error color variable */
    }
    .pink-theme .highlight {
      box-shadow: 0 0 4px rgba(255, 99, 71, 0.2); /* Using the error color variable from pink theme */
    }


    #result {
        padding: 15px 20px;
        text-align: center;
        color: var(--accent-primary); /* Default for Dark */
        font-size: 1.05em;
        min-height: 1.4em;
        font-weight: 500;
    }
    .light-theme #result, .pink-theme #result {
        color: var(--accent-darker); /* Use accent-darker for light/pink */
    }

    .footer {
        text-align: center; padding: 25px 15px;
        color: var(--text-secondary);
        font-size: 0.9em;
        margin-top: auto; border-top: 1px solid rgba(var(--accent-primary-rgb), 0.1); /* Default for Dark */
    }
    .light-theme .footer {
        border-top-color: rgba(var(--accent-rgb),0.15);
    }
    .pink-theme .footer {
        border-top-color: rgba(var(--accent-rgb),0.2); /* Pinkish border */
    }
    .footer a { color: var(--accent-secondary); text-decoration: none; font-weight: 400; }
    .footer a:hover { color: var(--accent-primary); text-decoration: underline; }

    /* Game Area Styles (for development notice) */
    #game-area-container {
        display: none;
        padding: 30px 20px;
        background-color: var(--bg-typing-area);
        border-top: 1px solid rgba(var(--accent-primary-rgb), 0.1); /* Default for Dark */
        border-radius: 0 0 var(--border-radius-main) var(--border-radius-main);
        flex-grow: 1;
        text-align: center;
        min-height: 330px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .light-theme #game-area-container {
        border-top-color: rgba(var(--accent-rgb),0.15);
    }
    .pink-theme #game-area-container {
        border-top-color: rgba(var(--accent-rgb),0.2); /* Pinkish border */
    }
    #game-area-container h2 {
        font-family: var(--font-heading);
        color: var(--accent-primary); /* Default for Dark */
        font-size: 1.8em;
        margin-bottom: 15px;
    }
    .light-theme #game-area-container h2, .pink-theme #game-area-container h2 {
        color: var(--accent-darker); /* Use accent-darker for light/pink */
    }
    #game-area-container p {
        font-size: 1em;
        color: var(--text-secondary);
        line-height: 1.7;
        max-width: 400px;
        margin-bottom: 25px;
    }
    .btn-return-to-practice {
        padding: 10px 20px;
        font-size: 0.95em;
        border-radius: var(--border-radius-small);
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        font-family: var(--font-ui);
        font-weight: 500;
        letter-spacing: 0.25px;
        outline: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: 1.5px solid var(--accent-secondary);
        background: var(--accent-secondary); /* Default for Dark */
        color: var(--button-text-on-accent);
        text-shadow: none;
        box-shadow: var(--shadow-button);
        margin-top: 15px;
    }
    .btn-return-to-practice:hover {
        background: var(--accent-active);
        border-color: var(--accent-active);
        transform: translateY(-1px);
        box-shadow: var(--shadow-button-hover);
    }
    .btn-return-to-practice i {
        margin-right: 8px;
    }
    .light-theme .btn-return-to-practice,
    .pink-theme .btn-return-to-practice {
        background: var(--accent-primary); /* Use accent-primary for light/pink */
        color: var(--button-text-on-accent);
        border-color: var(--accent-primary);
    }
    .light-theme .btn-return-to-practice:hover,
    .pink-theme .btn-return-to-practice:hover {
        background: var(--accent-active);
        border-color: var(--accent-active);
    }


    @media (max-width: 768px) {
      .hero-title { font-size: 2.2em; }
      .hero-tagline { font-size: 0.9em; max-width: 90%;}
      .main-controls { flex-direction: column; align-items: stretch; }
      .practice-mode-controls, .feature-toggles, .sound-settings, .theme-settings { width: 100%; justify-content: center; }
      .feature-toggles button { min-width: 100px; }
      #soundPackSelect, #themeSelect { min-width: 0; width: 100%; }
      .controls-and-stats-wrapper { padding: 20px 15px 10px; }
      .typing-area-container, #game-area-container { padding: 15px 15px 20px; min-height: 280px; }
      .typing-line, #typing-input-field { font-size: var(--font-size-typing-mobile); letter-spacing: var(--typing-letter-spacing-mobile); word-spacing: var(--typing-word-spacing-mobile); }
      #stats { grid-template-columns: repeat(2, 1fr); font-size: 0.88em; }
      #stats .value { font-size: 1.1em; }
      #game-area-container h2 { font-size: 1.6em; }
      #game-area-container p { font-size: 0.95em; }
    }
     @media (max-width: 480px) {
      .hero-title { font-size: 1.9em; }
      .hero-tagline { font-size: 0.85em; }
      .control-button-group button { font-size: 0.85em; padding: 8px 12px; }
      .feature-toggles button { min-width: 90px; }
      .select-label { font-size: 0.85em; }
      #soundPackSelect, #themeSelect { font-size: 0.85em; padding: 8px 10px; }
      .typing-line, #typing-input-field { font-size: calc(var(--font-size-typing-mobile) * 0.95); }
      #stats { padding: 10px 12px; }
      #stats span { padding: 6px 4px;}
      #stats .label { font-size: 0.8em; margin-bottom: 4px; }
      #stats .value { font-size: 1em; }
      #game-area-container h2 { font-size: 1.4em; }
      #game-area-container p { font-size: 0.9em; }
      .btn-return-to-practice { font-size: 0.9em; padding: 8px 15px; }
     }
  </style>
</head>
<body>
  <div class="main-content-wrapper"> <div class="main-content">
    <div class="hero-section">
        <a href="https://www.youtube.com/@KeyTherapy" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: inline-block;">
            <h1 class="hero-title">Key Therapy</h1>
            <p class="hero-tagline">🎧 깊은 수면과 집중을 위한<br>키보드 타건 ASMR</p>
        </a>
    </div>
  <div class="controls-and-stats-wrapper">
    <div class="settings-container">
        <div class="main-controls">
            <div class="practice-mode-controls control-button-group">
                <button onclick="startPractice('kor', true)"><i class="fas fa-language"></i>한글 단문</button>
                <button onclick="startPractice('korLong', true)"><i class="fas fa-align-left"></i>한글 장문</button>
                <button onclick="startPractice('eng', true)"><i class="fas fa-font"></i>영어 단문</button>
                <button onclick="startPractice('engLong', true)"><i class="fas fa-stream"></i>영어 장문</button>
                <button id="gameModeBtn" onclick="startGameModeSelection()"><i class="fas fa-gamepad"></i>게임 모드</button>
            </div>
            <div class="feature-toggles control-button-group">
                <button id="toggleSoundBtn"><i class="fas fa-volume-mute"></i> 타건음 OFF</button>
                <button id="toggleHighlightBtn" class="active"><i class="fas fa-highlighter"></i> 오타체크 ON</button>
                <button id="toggleStatsBtn" class="active"><i class="fas fa-chart-line"></i> 측정 ON</button>
            </div>
            <div class="sound-settings">
                <label for="soundPackSelect" class="select-label">타건음 선택:</label>
                <select id="soundPackSelect">
                    <option value="crunchy">서걱서걱</option>
                    <option value="pebbles">조약돌</option>
                    <option value="thocky">도각도각</option>
                </select>
            </div>
            <div class="theme-settings">
                <label for="themeSelect" class="select-label">테마 선택:</label>
                <select id="themeSelect">
                    <option value="dark">다크</option>
                    <option value="light">아이보리</option>
                    <option value="pink">핑크</option>
                </select>
            </div>
        </div>
    </div>
    <div id="stats">
        <span><span class="label">속도:</span> <span id="speedStat" class="value">0 타/분</span></span>
        <span><span class="label">정확도:</span> <span id="accuracyStat" class="value">0%</span></span>
        <span><span class="label">평균:</span> <span id="avgSpeedStat" class="value">0 타/분</span></span>
        <span><span class="label">최고:</span> <span id="maxSpeedStat" class="value">0 타/분</span></span>
    </div>
</div>
<div class="progress-bar-container">
    <div class="progress-bar"></div>
</div>
<div class="typing-area-container">
    <div id="line-display-area"> </div>
    <div id="typing-input-field-container">
        <input type="text" id="typing-input-field" autocorrect="off" autocapitalize="off" spellcheck="false" autocomplete="off" inputmode="text" aria-label="타자 입력창">
    </div>
    <div id="upcoming-lines-area"> </div>
</div>
<div id="game-area-container">
    <!-- Content will be injected by JavaScript -->
</div>
<div id="result"></div>
</div>
</div>
  <div class="footer"> <p>© 2024 Key Therapy. All rights reserved. <br> Designed for focused typing practice and relaxation.</p> </div>

<script>
// === 전역 변수 및 설정 ===
let currentMode = '';
let linesToPractice = [];
let currentDisplayLineIndex = 0;

let startTime = null;
let currentLineStartTime = null;
let currentArticleCorrectChars = 0;
let lastArticleSpeed = 0;

let sessionTotalValidChars = 0;
let sessionTotalCorrectChars = 0;
let sessionTotalMistypedChars = 0;
let overallAvgSpeedLog = [];
let overallMaxSpeed = 0;
let sessionResetInProgress = false;

const KOR_SPEED_FACTOR = 2.1;
let soundEnabled = false;
let highlightEnabled = true;
let statsVisible = true;

let soundPackSelectEl, themeSelectEl, toggleStatsBtn, gameModeBtnEl;
let progressBarContainerEl, progressBarEl;
let gameAreaContainerEl; // For "under development" notice

let currentSoundPack = 'crunchy';
const soundFiles = {
    pebbles: Array.from({length: 7}, (_, i) => `soundFiles/pebbles/pebble${i + 1}.wav`),
    crunchy: Array.from({length: 11}, (_, i) => `soundFiles/crunchy/crunchy${i + 1}.wav`),
    thocky: Array.from({length: 10}, (_, i) => `soundFiles/thocky/thocky${i + 1}.wav`)
};
let audioPool = {};
const MAX_AUDIO_OBJECTS = 8;
let audioPointer = {};

let toggleSoundBtn, toggleHighlightBtn, lineDisplayArea, typingInputField, resultEl, upcomingLinesArea, statsEl;
// Removed game-specific variables

function getRandom(arr) {
  if (!arr || arr.length === 0) return null;
  return arr[Math.floor(Math.random() * arr.length)];
}

const sentencePool = { kor: ["따뜻한 햇살이 창가에 가득 내린다.", "작은 행복이 모여 큰 기쁨이 된다.", "오늘 하루도 수고했어요 당신 최고.", "좋아하는 노래를 들으며 힐링해요.", "푸른 하늘을 보며 마음껏 숨 쉬세요.", "예쁜 꽃 한 송이가 미소를 선물해요.", "가끔은 모든 걸 잊고 푹 쉬어요.", "좋은 친구는 삶의 큰 보물 같아요.", "새로운 시작은 언제나 설레는 법이죠.", "오늘 저녁은 맛있는 음식을 드세요.", "고요한 밤 별들이 속삭이는 소리.", "작은 친절이 세상을 따뜻하게 해요.", "주말엔 늦잠을 자며 여유를 즐겨요.", "새로운 길을 걷는 건 멋진 도전이야.", "마음속 작은 빛을 따라 나아가세요.", "오늘 하루 감사한 일을 떠올려봐요.", "사랑하는 사람에게 마음을 전하세요.", "힘든 날엔 잠시 하늘을 올려다봐요.", "달콤한 디저트는 기분 전환에 최고죠.", "아침 공기가 상쾌하게 느껴지네요.", "밤하늘의 별들은 저마다의 이야기를 간직하고 있다.", "바람결에 실려 온 꽃 향기가 마음을 간지럽힌다.", "익숙한 골목길에서 문득 새로운 풍경을 발견한다.", "가을비 내리는 날엔 따뜻한 차 한 잔이 위로가 된다.", "오래된 책갈피에서 잊고 지냈던 추억을 만났다.", "마음의 창을 열면 세상은 더 아름답게 보인다.", "작은 연못에 비친 달 그림자가 고요히 흔들린다.", "새벽녘 풀잎에 맺힌 이슬처럼 영롱한 순간들.", "구름 한 점 없는 하늘은 끝없는 가능성을 닮았다.", "모든 끝은 새로운 시작을 의미하기도 한다.", "삶이라는 여행길에서 가장 소중한 것은 경험이다.", "마음이 가는 대로 발길이 이끄는 대로.", "한 줄기 빛이 어둠을 가르듯 희망은 절망 속에서 피어난다.", "소리 없이 내리는 눈처럼 조용한 위로가 필요한 날.", "따뜻한 눈빛 하나가 얼어붙은 마음을 녹인다.", "시간의 강물은 쉼 없이 흐르지만 추억은 그 자리에 남는다.", "나뭇잎 사이로 부서지는 햇살이 보석처럼 반짝인다.", "낯선 곳에서의 우연한 만남은 예기치 못한 선물이다.", "가끔은 길을 잃어야 새로운 길을 찾을 수 있다.", "진정한 아름다움은 꾸밈없는 자연스러움에 있다.", "오늘 걷지 않으면 내일은 뛰어야 한다.", "백지장도 맞들면 낫다.", "뜻이 있는 곳에 길이 있다.", "시작이 반이다.", "하늘은 스스로 돕는 자를 돕는다.", "인내는 쓰지만 그 열매는 달다.", "구슬이 서 말이라도 꿰어야 보배다.", "세 살 버릇 여든까지 간다.", "젊어서 고생은 사서도 한다.", "콩 심은 데 콩 나고 팥 심은 데 팥 난다.", "키읔 티읕 피읖 히읗 거센소리 연습.", "쌍기역 쌍디귿 쌍비읍 쌍시옷 쌍지읒 된소리 연습.", "맑고 높은 가을 하늘 아래 코스모스 한들한들.", "반짝이는 별빛 아래 소중한 추억을 그려본다.", "찹쌀떡 맵쌀떡 온갖 떡들이 가득하다.", "깎아지른 절벽 아래 펼쳐진 푸른 바다.", "닭볶음탕과 칡넝쿨은 최고의 궁합이다.", "읊조리는 시 한 수가 마음을 촉촉하게 적신다.", "빠른 갈색 여우가 게으른 개 위로 뛰어넘는다.",  "외계생명체 존재 여부는 아직 밝혀지지 않았다.", "안녕하세요 만나서 반갑습니다 좋은 하루 되세요.", "대한민국 서울특별시 아름다운 우리 강산 푸르게 푸르게."], eng: ["The weather is lovely today perfect for a nice walk.", "Start your morning fresh with a warm cup of coffee.", "Listening to your favorite music always lifts the spirits.", "A small smile can brighten up someone's entire day.", "Sometimes it's nice to just gaze at the clear blue sky.", "A good book can be a wonderful and loyal companion.", "You did a great job today have a restful evening.", "Learning something new is always an exciting endeavor.", "Enjoy a delicious dinner together with your family.", "How about sending a warm greeting to an old friend?", "All that glitters is not gold.", "To be or not to be that is the question.", "The woods are lovely dark and deep.", "Hope is the thing with feathers that perches in the soul.", "It was the best of times it was the worst of times.", "The only thing we have to fear is fear itself.", "Stay hungry. Stay foolish.", "I have a dream that one day this nation will rise up.", "Two roads diverged in a wood and I I took the one less traveled by.", "The journey of a thousand miles begins with a single step.", "Be the change that you wish to see in the world.", "Not all those who wander are lost.", "That which does not kill us makes us stronger.", "Ask not what your country can do for you ask what you can do for your country.", "The unexamined life is not worth living.", "Where there is love there is life.", "The quick brown fox jumps over the lazy dog.", "Pack my box with five dozen liquor jugs.", "Sphinx of black quartz judge my vow.", "Amazingly few discotheques provide jukeboxes.", "How vexingly quick daft zebras jump.", "Bright vixens jump dozy fowl quack.", "Quick wafting zephyrs vex bold Jim.", "Crazy Fredrick bought many very exquisite opal jewels.", "Hello how are you today?", "Thank you very much for your help.", "Pleased to meet you.", "Practice makes perfect.", "Have a wonderful day ahead.", "Good morning sunshine.", "Keep up the good work.", "See you later alligator.", "What a beautiful surprise.", "Actions speak louder than words."], korLong: [ "문득 멈춰 서서 생각해보는 거야. 나는 지금 어디쯤 서 있는 걸까. 분명 시작은 찬란했고, 가슴 벅찬 기대들로 가득했는데, 어쩌다 이 길목에서 숨을 고르고 있을까. 지나온 발자국을 되짚어보면, 후회와 미련이 더 선명해 보여. 왜 그때는 그토록 서둘렀을까. 왜 그때는 그토리 눈앞의 작은 욕심에 사로잡혔을까. 밤이 깊어지면, 침묵 속에서 내가 놓친 것들의 그림자가 길게 드리워. 영원할 줄 알았던 관계는 바람처럼 흩어졌고, 손에 닿을 듯했던 꿈은 안개처럼 사라졌어. 사람들은 다들 괜찮다고, 잘하고 있다고 다독이지만, 정말 나는 괜찮은 걸까. 이 알 수 없는 공허함은 언제쯤 채워질까. 어쩌면 영원히 채워지지 않는 게 정상일지도 모르지. 그저 이 쓸쓸함을 친구 삼아, 오늘도 나는 펜을 들고 또 다른 하루를 적어 내려갈 뿐이야. 누구도 읽지 않을, 나만의 이야기들을. 이 캄캄한 어둠 속에서 나는 나 자신에게 묻는다. 괜찮으냐고, 정말 괜찮으냐고.", "실은, 나는 꽤 오랫동안 가면을 쓰고 살았어. 세상이 요구하는 강한 모습, 완벽한 모습을 연기하며 나 자신을 잃어갔지. 아파도 아프다고 말하지 못하고, 힘들어도 괜찮은 척 웃어야만 했어. 사람들은 그런 나를 보며 '대단하다', '강하다'고 칭찬했지만, 내 안은 점점 더 곪아가고 있었지. 밤이 되면, 그 가면을 벗어던지고 침대 위에서 하염없이 눈물을 흘리곤 했어. 누구에게도 보여줄 수 없는 나의 연약함, 나의 두려움이 나를 삼킬 듯 밀려왔거든. 이제는 좀 지쳐. 더 이상 이런 가짜 나로 살고 싶지 않아. 비록 처음에는 낯설고 두렵겠지만, 나의 연약함을 드러내고, 나의 아픔을 솔직하게 마주하고 싶어. 괜찮지 않아도 괜찮다는 걸, 나 자신에게 끊임없이 말해주고 싶어. 그래야만 내가 비로소 숨 쉴 수 있을 것 같아. 이 글을 쓰는 지금도 손이 떨리지만, 이게 진짜 나를 찾아가는 첫걸음이 되리라 믿어. 나, 이제 괜찮지 않아도 괜찮으려 한다.", "우스운 일이지. 우리는 모두 행복해지려고 애쓰면서, 정작 그 행복이라는 추상적인 개념 때문에 불행해지곤 하잖아. 죽을힘을 다해 좇았던 성공 뒤에는 허무함만 남고, 영원할 거라 믿었던 사랑은 한순간에 재가 되어버리기도 해. 삶이란 참으로 얄궂은 아이러니의 연속이야. 얻으려 할수록 멀어지고, 놓아주면 되레 돌아오는 것들이 얼마나 많던가. 우리는 끊임없이 무엇이 '정답'인지 찾으려 발버둥 치지만, 애초에 정답 같은 건 없는 미완성의 그림이 삶 아닐까. 흑백 논리로만 세상을 바라보려다 길을 잃고 헤매는 어리석은 존재들. 어쩌면 이 복잡하고 알 수 없는 삶 속에서, 나만의 해답을 찾아 헤매는 작은 존재일 뿐인 지도 몰라. 오늘도, 내일도. 그리고 앞으로도 이 알 수 없는 아이러니 속에서 나는 나만의 춤을 추겠지. 옳고 그름을 따지기보다, 그저 존재할 뿐인 나로.", "어느덧 세월이 강물처럼 흘러갔다는 걸 깨달았어. 손가락 사이로 빠져나가는 모래처럼, 붙잡으려 해도 속절없이 흘러가버린 시간의 조각들. 어릴 적에는 하루가 영원처럼 길었는데, 이제는 눈 깜짝할 사이에 한 계절이 가고, 한 해가 가버려. 남는 건 희미한 기억들과 몇 장의 빛바랜 사진뿐인 것 같아. 잃어버린 것들이 너무 많아. 다시는 돌아오지 않을 그 시절, 그 사람들의 온기. 가끔은 이렇게 시간이 빨리 흐르는 게 무섭기도 해. 내가 정말 이 시간을 의미 있게 사용하고 있는 건지, 낭비하고 있는 건 아닌지 불안해질 때가 있어. 다시는 돌아오지 않을 이 소중한 시간들을 어떻게 채워나가야 할까. 정답은 없겠지만, 적어도 후회는 남기지 말아야겠다고 다짐하곤 해. 어쩌면 시간은 그저 흘러가는 것이 아니라, 우리가 어떻게 채우느냐에 따라 다른 의미를 가지는 건지도 모르지. 나의 시간은 나의 선택으로 채워지는 그림 같은 것.", "살다 보면 별의별 인간 군상을 다 만나게 되더라. 친절한 가면을 쓴 이기적인 사람, 겉으로는 냉정해도 속은 따뜻한 사람. 그 모든 관계 속에서 우리는 웃고 울고, 배우고 성장하고, 때로는 상처받고 또 치유되지. 그런데 가장 어려웠던 건, 나를 아프게 하는 사람들을 어떻게 대해야 하는가였어. 미워하고 싶지 않지만, 미워할 수밖에 없는 마음이 들 때도 있었고, 용서하고 싶지만, 용서가 되지 않아 밤잠을 설쳤지. 관계는 참 미묘해. 가까워지려 할수록 상처받을 확률도 높아지고, 멀어지려 하면 외로움이 찾아와. 어쩌면 모든 관계는 연습 같은 거야. 끊임없이 부딪히고, 배우고, 깨달아가는 과정. 완벽한 관계는 없겠지만, 서로의 다름을 인정하고, 존중하며, 함께 성장해나가는 관계야말로 가장 값진 것이라는 걸 이제는 알 것 같아. 상처받은 관계는 끝이 아니라, 새로운 시작이 될 수도 있다는 걸. 나는 오늘도, 이 복잡한 관계 속에서 나를 찾아간다. 그리고 나만의 평화를 지키는 법을 배워간다.", "가끔은 혼자 있고 싶어. 완벽하게 혼자여서, 아무도 없는 곳에서, 아무 생각 없이 그저 나 자신으로 온전히 존재하고 싶을 때가 있어. 세상은 끊임없이 나에게 무언가를 요구하고, 나는 그 기대에 부응하기 위해 늘 애써야만 했지. 그러다 보니 내 안에 있는 진짜 목소리는 들리지 않고, 겉으로만 번지르르한 가면 쓴 나만 남아버린 것 같아. 고독은 두려운 것이 아니야. 오히려 나를 온전히 만날 수 있는 소중한 시간이지. 그 시간 속에서 나는 나의 그림자도, 나의 빛도 마주할 수 있어. 홀로 존재하는 법을 배우는 것, 그것이 어쩌면 가장 큰 성장일지도 모르겠어. 세상의 모든 소음에서 벗어나, 나만의 조용한 섬에서 잠시 숨을 고르고 싶다. 그렇게 나를 비워내고 나면, 다시 세상을 마주할 용기가 생길 테니까. 나는 이 고독 속에서 나의 진정한 뿌리를 찾는다. 그리고 나의 영혼을 채운다.", "한때 나에게도 수많은 꿈이 있었어. 반짝이는 별처럼 셀 수 없이 많았지. 밤하늘을 수놓은 은하수처럼, 내 미래도 그렇게 빛날 줄 알았어. 그런데 살다 보니, 그 꿈들이 하나둘씩 힘없이 사라져가는 걸 보게 됐어. 현실이라는 거대한 벽 앞에서 좌절하고, 타협하고, 결국에는 포기해버린 꿈들이 얼마나 많은지 몰라. 가끔은 내가 꿈을 잃어버린 건지, 아니면 꿈이 나를 버린 건지 헷갈릴 때도 있어. 그 허무함과 상실감은 말로 다 표현할 수 없지. 그런데 말이야, 이제는 알아. 꿈은 사라지는 게 아니라는 걸. 다만 형태를 바꿀 뿐이라는 걸. 어쩌면 내가 꾸었던 거대한 꿈들은 작은 조각들로 나뉘어 내 삶 속에 스며들어 있는 건지도 몰라. 비록 예전처럼 거창한 꿈은 없지만, 소박한 행복을 꿈꾸고, 소중한 사람들과 함께하는 삶을 꿈꾸는 것만으로도 충분하다는 걸. 나는 오늘도, 이 작은 꿈들을 소중히 품고 살아가고 있어. 언젠가 이 작은 꿈들이 모여 또 다른 큰 그림을 그릴 날이 오겠지. 그 그림은 아마 예전의 내가 상상했던 것과는 전혀 다른, 나만의 색깔로 빛나는 그림일 거야. 나는 여전히 꿈을 꾼다. 다만 그 꿈의 형태가 달라졌을 뿐.", "돌아보면, 나는 꽤 오랫동안 과거의 그림자에 갇혀 살았어. '만약 그때 그랬더라면…', '만약 그때 다른 선택을 했더라면…' 하는 후회와 미련이 뱀처럼 나를 옥죄었지. 과거는 이미 지나간 것인데, 나는 끊임없이 그 과거를 붙잡고 씨름했어. 그러다 보니 현재를 제대로 살지 못하고, 미래를 계획할 수도 없었지. 마치 과거의 늪에 빠져 허우적거리는 것처럼 말이야. 그런데 어느 순간 깨달았어. 과거는 결코 바꿀 수 없다는 걸. 내가 할 수 있는 건 오직 그 과거에서 배우고, 그것을 발판 삼아 앞으로 나아가는 것뿐이라는 걸. 과거는 뒤에 놓인 풍경일 뿐이야. 내가 가야 할 곳은 언제나 앞이야. 이제는 그 그림자에서 벗어나고 싶어. 과거의 짐을 내려놓고, 가볍게 앞으로 나아가고 싶어. 오늘부터라도 현재를 온전히 살아가고 싶어. 그게 내가 나에게 줄 수 있는 가장 큰 자유일 테니까. 나의 과거는 나의 일부이지만, 그것이 나의 전부가 될 수는 없어. 나는 나만의 속도로, 나만의 길을 걸어갈 것이다.", "가끔 이런 생각이 들어. 나는 지금 옳은 길을 가고 있는 걸까? 이 길이 정말 내가 원하는 곳으로 이어질까? 삶은 언제나 수많은 갈림길 앞에서 나를 망설이게 해. 어떤 길을 선택해야 할지 몰라 불안하고, 때로는 잘못된 길로 들어서서 헤매기도 했지. 남들이 가는 길이 정답인 줄 알고 무작정 따라갔다가 후회했던 날들도 많아. 그 모든 과정 속에서 나는 수없이 넘어지고 일어섰어. 그런데 살아보니, 정답은 없다는 걸 알게 됐어. 각자의 삶에는 각자의 길이 있고, 그 길을 찾아가는 과정 자체가 중요한 거야. 남들이 뭐라 하든, 내 마음이 이끄는 대로 가는 용기가 필요하다는 걸. 비록 그 길이 험난하고 외로울지라도, 결국 나만의 길을 완성할 수 있을 테니까. 이제는 더 이상 헤매지 않고, 내 발자국이 남긴 길을 따라 묵묵히 걸어갈 거야. 그게 나만의 지도가 될 테니까. 나의 길은 내가 만든다. 나의 길은 나의 이야기다.", "나는 꽤 오랫동안 타인의 시선이라는 감옥에 갇혀 살았어. 사람들이 나를 어떻게 생각할까, 혹시 나를 싫어하지는 않을까 하는 불안감에 사로잡혀 늘 나를 포장하고 숨겼지. 내 진짜 모습이 아닌, 사람들이 좋아할 만한 가면을 쓰고 살아왔던 것 같아. 그렇게 애써 얻은 인정은 겉으로는 달콤했지만, 속으로는 늘 공허했어. 결국 나는 나 자신을 잃어버렸으니까. 이 끝없는 연극 속에서 나는 지쳐갔어. 그런데 어느 날 문득, 이렇게 살다가는 내 삶이 통째로 사라지겠다는 생각이 들었어. 이제는 그 가면을 벗어던지고 싶어. 사람들이 나를 좋아하든 싫어하든, 있는 그대로의 나를 보여주고 싶어. 비록 처음에는 낯설고 두렵겠지만, 나 자신으로 살아가는 용기를 내고 싶어. 그게 내가 나에게 줄 수 있는 가장 큰 선물일 테니까. 나는 이제 자유롭게 숨 쉴 수 있을 것 같아. 나의 삶은 이제부터 나만의 것이 될 거야.", "이 세상에 영원한 건 아무것도 없다는 걸, 이제는 뼈저리게 느끼곤 해. 변하지 않을 것 같았던 사랑도 시간 앞에서 빛을 잃고, 영원할 것 같았던 우정도 어긋난 길을 걷다가 끝을 맺어. 늘 그 자리에 있을 것 같았던 사람들도 하나둘씩 바람처럼 떠나가. 모든 것이 변하고 사라지는 이 세상에서, 나는 무엇을 붙잡고 살아야 할까. 가끔은 허무하고 슬프기도 해. 손에 쥔 모든 것이 결국 모래처럼 빠져나간다는 생각에 마음이 아려올 때도 있지. 하지만 동시에 깨달았어. 변하는 것들 속에서 변하지 않는 나 자신을 찾아야 한다는 걸. 외부의 조건에 흔들리지 않는 내면의 평화를 찾아야 한다는 걸. 모든 것이 사라져도 남는 것은 오직 나 자신뿐이라는 걸. 이제는 흘러가는 것을 붙잡으려 애쓰기보다, 변하지 않는 나를 가꾸는 데 더 집중하고 싶어. 그게 이 무상한 세상에서 내가 붙잡을 수 있는 유일한 진실일 테니까. 나는 사라지는 것들 속에서 영원한 나를 찾아간다.", "가끔은, 너무나 아파서 모든 것을 놓아버리고 싶을 때가 있어. 심장이 찢어지는 것 같고, 숨쉬는 것조차 고통스럽게 느껴질 때가 있지. 사람들은 시간이 약이라고 말하지만, 어떤 상처는 시간이 흘러도 아물지 않는 것 같아. 내 안에 깊이 박힌 가시처럼, 건드릴 때마다 쑤셔오는 고통에 나는 오늘도 몸서리치지. 그 아픔은 나를 집어삼킬 듯했지만, 동시에 나를 더 깊이 들여다보게 만들었어. 고통 속에서 나는 나 자신을 발견하고, 다른 이들의 아픔에 공감하는 법을 배웠어. 비록 아프지만, 이 아픔이 나를 성장시키는 자양분이라고 생각하려고 해. 아프지 않고는 아무것도 배울 수 없는 게 삶인 것 같거든. 오늘도 나는 이 아픔을 끌어안고 살아간다. 언젠가 이 아픔이 치유되어, 그 자리에 더 단단한 살이 돋아날 날을 기다리면서. 나는 아픔을 통해 비로소 나를 완성한다.", "나는 꽤 오랫동안 완벽한 행복을 찾아 헤맸어. 마치 신기루처럼, 손에 잡힐 듯 잡히지 않는 그 무엇을 좇아 끊임없이 달려갔지. 더 많은 것을 가지면, 더 높은 곳에 오르면, 더 완벽한 사람이 되면 행복해질 거라고 믿었어. 그런데 살아보니, 완벽한 행복이라는 건 애초에 존재하지 않는다는 걸 알게 됐어. 행복은 특정 목적지에 도달했을 때 주어지는 상이 아니라, 그 길을 걸어가는 과정 속에 숨어 있는 거야. 따뜻한 햇살 한 줄기, 고요한 밤하늘의 별, 사랑하는 사람의 미소, 맛있는 음식 한 조각. 이 모든 작은 순간들이 모여 삶의 행복을 이루는 것이라는 걸 이제야 깨달았어. 이제는 더 이상 완벽한 행복을 좇아 헤매지 않을 거야. 그저 오늘 주어진 작은 행복들을 소중히 여기며 살아가고 싶어. 그게 진정한 행복일 테니까. 나는 이제 완벽한 행복이 아닌, 나의 일상 속에서 피어나는 진짜 행복을 찾는다.", "살아보니 말이야, 후회 없는 삶이라는 건 애초에 불가능하다는 걸 알게 됐어. 누구나 크고 작은 후회를 안고 살아가게 마련이지. '그때 그랬더라면…', '그때 다른 선택을 했더라면…' 하는 생각들이 밤마다 나를 찾아와 괴롭히곤 해. 하지만 문득 이런 생각이 들었어. 후회도 결국 내 삶의 일부라는 걸. 그 후회들이 모여 지금의 나를 만들었고, 내가 무엇을 중요하게 생각하는지 가르쳐주었다는 걸. 후회는 나를 괴롭히기 위해 존재하는 것이 아니라, 나에게 무언가를 가르쳐주기 위해 존재한다는 걸. 이제는 더 이상 후회에 갇히지 않고 싶어. 과거의 실수를 인정하고, 그것을 발판 삼아 더 나은 내일을 만들어가고 싶어. 후회 없는 삶을 살기 위해 노력하겠지만, 설령 후회가 남더라도 그것마저도 나의 삶이라는 것을 받아들이고 싶어. 그게 진짜 어른이 되는 과정인 것 같거든. 나는 후회 속에서 나의 길을 발견한다.", "내 삶은 마치 계절의 변화와 같아. 따뜻한 봄날처럼 모든 것이 새롭게 시작되고 설렘으로 가득한 시기가 있는가 하면, 뜨거운 여름처럼 열정적으로 타오르며 땀 흘려 노력하는 시기도 있지. 그러다가 가을처럼 모든 것을 거둬들이고 정리하며 사색에 잠기는 시기도 오고, 혹독한 겨울처럼 모든 것이 얼어붙고 움츠러들며 견뎌내야 하는 시기도 와. 어떤 계절이든 영원히 머무르지 않고, 결국에는 다음 계절로 이어진다는 걸 깨달았어. 힘든 겨울을 지나야만 다시 따뜻한 봄이 오고, 봄이 와야만 다음 여름을 기대할 수 있다는 것을. 그러니 지금 어떤 계절을 살고 있든, 너무 좌절하거나 너무 자만하지 말아야겠다고 다짐하곤 해. 이 모든 것은 잠시 머무르다 지나갈 뿐이니까. 나는 이 삶의 모든 계절을 온전히 받아들이고 싶어. 그게 삶의 아름다움일 테니까. 나의 삶은 계절처럼 흐르며 성장한다.", "나는 꽤 오랫동안 나 자신을 증명하기 위해 애썼어. 내가 얼마나 괜찮은 사람인지, 얼마나 유능한 사람인지, 세상에 보여주기 위해 끊임없이 노력하고 발버둥 쳤지. 사람들의 인정과 칭찬에 목말라 있었어. 그런데 살아보니, 굳이 나 자신을 증명할 필요가 없다는 걸 알게 됐어. 나를 진정으로 이해하고 믿어주는 사람들은 내가 굳이 애쓰지 않아도 나를 알아봐 주고, 나를 믿지 않는 사람들에게는 아무리 애써도 소용없다는 걸. 이제는 남들에게 나를 증명하기보다, 나 자신에게 만족하고 싶어. 내가 하고 싶은 일을 하고, 내가 옳다고 생각하는 길을 걸어갈 거야. 굳이 누구에게도 인정받으려 하지 않을 거야. 그게 진정한 자유라는 걸 깨달았거든. 나 자신으로 존재하는 것만으로도 충분하다는 걸 이제는 알아. 나는 이제 더 이상 누군가에게 나를 증명하지 않을 것이다. 오직 나 자신에게만 충실할 것이다.", "살아보니 말이야, 이 세상은 정답이 없는 문제들로 가득하다는 걸 알게 됐어. 어릴 적에는 모든 문제에는 답이 있고, 그 답을 찾아내는 것이 가장 중요하다고 배웠지. 그런데 삶은 수학 문제처럼 딱 떨어지는 답이 없더라고. 어떤 선택을 하든 장단점이 있고, 하나의 사건을 놓고도 수많은 해석이 가능해. 정답을 찾으려 헤매다가는 오히려 길을 잃기 십상이지. 오히려 그 혼란 속에서 나만의 해답을 만들어가는 것이 더 중요하다고 생각해. 틀려도 괜찮아. 그 과정에서 배우고 성장하는 것이 더 중요하니까. 나만의 방식으로 문제를 해결하고, 나만의 길을 만들어가는 것. 그게 이 복잡한 세상 속에서 살아가는 지혜인 것 같아. 정답은 없지만, 나만의 답은 만들 수 있어. 나의 삶은 내가 풀어가는 미완의 문제집이다.", "가끔 이런 생각이 들어. 내가 가진 이 수많은 감정들은 대체 어디서 오는 걸까? 기쁨, 슬픔, 분노, 사랑, 불안, 질투… 이 모든 감정들이 나를 움직이고, 나를 살아가게 만드는 것 같아. 때로는 감정의 거대한 파도에 휩쓸려 허우적댈 때도 있고, 때로는 감정이 너무 메말라 아무것도 느끼지 못할 때도 있지. 감정은 참 다루기 어려운 존재야. 억누르려 하면 더 크게 폭발하고, 외면하려 하면 그림자처럼 따라붙지. 하지만 이제는 알아. 감정은 그저 감정일 뿐이라는 걸. 옳고 그름이 없고, 좋고 나쁨이 없는, 그저 존재하는 것들이라는 걸. 이제는 내 감정을 인정하고 받아들이고 싶어. 울고 싶으면 울고, 웃고 싶으면 웃을 거야. 감정에 휘둘리지 않고, 감정을 있는 그대로 바라보는 연습을 하고 싶어. 그게 진정한 나를 만나는 길이 될 테니까. 나의 감정은 나의 일부이며, 나는 그 모든 감정을 포용한다.", "내 인생의 가장 큰 선물은 아마도 '관계'일 거야. 가족, 친구, 연인, 동료… 수많은 사람들과의 만남 속에서 우리는 웃고 울고, 배우고 성장하고, 때로는 상처받고 또 치유되지. 그 관계들이 모여 내 삶을 풍성하게 만들고, 나를 나답게 만들어주었어. 비록 어떤 관계는 끝을 맺었지만, 그 모든 관계 속에서 얻은 배움과 추억은 영원히 내 안에 남아있어. 관계는 끊임없는 노력과 관심이 필요한 섬세한 예술이야. 서로의 다름을 인정하고, 존중하며, 진심을 다해 소통하려 노력해야 해. 때로는 상처를 주고받을 수도 있지만, 그 상처마저도 관계를 더 깊게 만드는 자양분이 될 수 있어. 나는 오늘도, 이 소중한 관계들을 가꾸며 살아가고 있어. 그게 내 삶의 가장 큰 의미일 테니까. 나는 관계 속에서 나를 발견하고, 관계 속에서 성장한다.", "힘들 때마다 나는 생각한다. 이 모든 시련이 나를 더 단단하게 만들 거라는 믿음. 마치 대장장이의 망치질처럼, 고통스러운 순간들이 나를 더욱 강하게 단련하고 있다고 말이야. 때로는 모든 것을 포기하고 싶을 만큼 절망적인 순간도 있었어. 세상이 나를 벼랑 끝으로 내모는 것 같았지. 하지만 나는 쓰러지지 않았다. 넘어져도 다시 일어섰고, 눈물을 흘리면서도 한 걸음 더 나아갔어. 나는 안다. 이 모든 시련이 나에게 무언가를 가르쳐주기 위해 찾아왔다는 것을. 고통 속에서 배우고, 시련을 통해 성장하며, 결국 나는 더욱 성숙한 존재로 거듭날 것이다. 당신은 혼자가 아니며, 이 모든 것을 이겨낼 힘이 있습니다. 그러니 두려워 말고 당신에게 다가오는 시련을 받아들이세요. 그것은 당신을 성장시킬 가장 좋은 스승이 될 것입니다. 나는 나의 시련을 통해 빛나는 존재가 될 것이다.", "어느 날 문득, 모든 것을 통제하려는 욕심을 내려놓았을 때, 비로소 진정한 자유를 맛보았다. 삶은 예측 불가능하며, 때로는 나의 의지와 상관없이 흘러가는 거대한 강물과 같다는 것을 깨달았지. 그 흐름에 몸을 맡기고, 불확실성을 받아들일 때 비로소 마음의 평화를 얻을 수 있더군. 모든 것을 계획하고 통제하려다 보면 오히려 더 큰 불안감에 휩싸여. 삶은 우리에게 끊임없이 변화를 요구하고, 그 변화 속에서 우리는 성장하는 법을 배우는 거야. 당신의 손을 활짝 펴고, 삶이 당신에게 주는 모든 것을 감사함으로 받아들여봐. 통제하려 하지 말고, 믿고 따라가 봐. 당신의 삶은 당신이 생각하는 것보다 훨씬 더 큰 그림 속에서 움직이고 있어. 그 그림을 믿고 나아가면 돼. 이제 나는 자유롭다. 강물처럼 흐르는 삶 속에서 나는 나만의 춤을 춘다.", "밤하늘의 별들을 바라보며 문득 생각한다. 각각의 별들이 홀로 빛나지만, 함께 모여 아름다운 은하수를 이루는 것처럼, 우리도 각자의 삶 속에서 고유한 빛을 내며 서로에게 영감을 주고 있다고. 당신이 홀로 있다고 느낄 때에도, 당신의 작은 빛은 누군가에게 길을 밝혀주고 있을지도 모르는 일이야. 당신의 존재 자체가 의미 있으며, 당신의 삶은 우주만큼이나 소중해. 어둠 속에서도 희망을 잃지 말고, 당신의 빛을 계속해서 비추렴. 언젠가 그 작은 빛들이 모여 더 큰 빛을 만들고, 세상을 따뜻하게 비출 테니까. 나는 우주의 한 조각이며, 나의 빛은 영원할 것이다. 나는 나의 빛으로 세상을 비춘다.", "진정한 지혜는 많은 것을 아는 데서 오는 것이 아니라, 자신이 무엇을 모르는지 아는 데서 시작된다는 것을 깨달았다. 겸손한 마음으로 배우고, 끊임없이 탐구하며, 자신의 한계를 인정할 때 우리는 비로소 성장할 수 있더군. 세상은 넓고 배울 것은 무궁무진해. 닫힌 마음으로는 아무것도 얻을 수 없어. 열린 마음으로 세상의 모든 배움을 받아들이렴. 모든 경험은 나의 스승이 되고, 모든 만남은 나에게 새로운 지혜를 선물해 주지. 나의 지혜가 나의 삶을 더욱 풍요롭게 만들고, 다른 이들에게도 작은 영감을 줄 수 있다면 좋겠어. 배움의 길은 끝이 없으며, 그 길 위에서 나는 더욱 빛나는 존재가 될 것이다. 나는 배움을 통해 나를 완성한다.", "삶의 마지막 순간에 나는 무엇을 후회하게 될까? 아마도 해보지 못한 것들, 전하지 못한 사랑, 용서하지 못한 마음들일 거야. 이 사실을 깨달은 이후로, 나는 후회 없는 삶을 살기 위해 매 순간을 소중히 여기고, 진심을 다해 살아가려 노력한다. 사랑하는 이에게 사랑한다고 말하고, 미안하다는 마음을 전하고, 용서해야 할 사람을 용서하며, 하고 싶은 일은 더 이상 망설이지 않고 시작해. 우리는 미래가 우리를 기다려줄 거라고 착각하지만, 삶은 언제나 불확실성의 연속이야. 오늘이 마지막일 수도 있고, 지금 이 순간이 다시 오지 않을 기회일 수도 있어. 더 이상 미루지 않고, 오늘 당장 하고 싶은 일을 시작하고, 전하고 싶은 마음을 전해야겠다고 다짐하곤 해. 그래야만 후회 없는 삶을 살 수 있을 테니까. 내일은 너무 늦을지도 모른다는 것을, 이제는 정말 알아야 할 때야. 나는 나의 삶을 후회 없이 채워갈 것이다.", "캄캄한 어둠 속에서도 나는 희망의 끈을 놓지 않는다. 우리가 힘든 시간을 견딜 수 있는 것은 오직 '희망' 때문이라는 것을 알기 때문이야. 어둠 속에서도 한 줄기 빛을 찾아내고, 절망 속에서도 다시 일어설 수 있다고 믿는 마음이 나를 지탱한다. 희망은 결코 꺼지지 않는 마음속의 불꽃과 같아. 때로는 작게 깜빡거리기도 하고, 때로는 거센 바람에 흔들리기도 하지만, 결코 완전히 사라지지 않아. 그 불꽃이 꺼지지 않도록 끊임없이 내면의 힘을 불어넣고, 나의 마음속에 희망의 빛을 항상 밝히려고 노력한다. 희망이 있는 한, 우리는 어떤 어려움도 이겨낼 수 있다. 나의 내면에 숨겨진 희망의 힘을 믿으렴. 그것은 나를 앞으로 나아가게 하는 가장 강력한 동력이 될 거야. 나는 희망을 통해 살아간다. 그리고 희망은 나를 배신하지 않을 것이다.", "어느덧 삶은 수많은 선택의 연속이었다는 걸 깨달았어. 밥을 먹는 일부터, 친구를 만나는 일, 심지어 오늘 아침 어떤 옷을 입을지까지. 작은 선택들이 모여 나라는 사람을 만들고, 내 삶의 방향을 결정했지. 때로는 잘못된 선택으로 후회하고, 때로는 더 나은 선택을 하지 못해 아쉬워했던 날들이 많아. 하지만 이제는 알아. 모든 선택에는 책임이 따르지만, 동시에 그 선택이 나를 성장시키는 기회가 된다는 것을. 옳고 그름을 떠나, 나의 선택을 존중하고 그 결과를 받아들이는 용기가 필요하다는 걸. 어쩌면 삶이란 완벽한 선택을 하는 것이 아니라, 불완전한 선택들 속에서 나만의 길을 찾아가는 과정인 것 같아. 나는 나의 선택을 통해 나의 삶을 만들어간다. 그 선택들이 모여 나만의 독특한 그림을 그릴 것이다.", "나는 왜 존재할까? 이 세상에 태어난 이유가 있을까? 가끔 잠 못 드는 밤, 이 질문들이 나를 사로잡아. 수많은 사람들 속에서 나는 한없이 작은 존재일 뿐인데, 이 작은 존재에게 무슨 거창한 의미가 있을까 하는 불안감에 휩싸이곤 해. 내가 사라져도 세상은 아무렇지 않게 흘러갈 텐데. 이런 생각을 하다 보면 한없이 초라해지곤 하지. 하지만 동시에 깨달았어. 거창한 의미가 없어도 괜찮다는 걸. 그저 존재한다는 것만으로도 충분하다는 걸. 숨 쉬고, 느끼고, 생각하고, 사랑하는 이 모든 순간들이 이미 의미가 있다는 걸. 나의 존재는 이미 그 자체로 빛나고 있다는 걸. 이제는 더 이상 존재의 이유를 찾아 헤매지 않을 거야. 그저 나의 존재를 온전히 받아들이고, 이 순간을 충실히 살아갈 거야. 나는 나로 존재한다. 그리고 그것은 이미 충분하다.", "내 마음은 꽤 오랫동안 깊은 상처로 얼룩져 있었어. 누구에게도 말할 수 없는 비밀처럼, 나 혼자 삭이고 또 삭였지. 그 상처는 때때로 나를 집어삼킬 듯했지만, 나는 늘 괜찮은 척해야만 했어. 그런데 이제는 알아. 상처는 외면할수록 더 깊어진다는 것을. 아픔을 인정하고, 그 상처를 들여다볼 용기를 내야만 비로소 치유될 수 있다는 것을. 마치 오래된 그림의 물감을 벗겨내듯, 나의 상처들을 하나씩 드러내고 싶어. 비록 아프겠지만, 그 아픔 속에서 나를 더 깊이 이해하고 사랑할 수 있을 거야. 나는 더 이상 이 상처에 갇히지 않을 거야. 나는 이 상처를 통해 더 강하고 지혜로운 사람으로 성장할 거야. 치유의 여정은 길고 힘들겠지만, 나는 나를 믿고 나아갈 거야. 나의 상처는 나의 훈장이 될 것이다.", "어깨에 짊어진 삶의 무게가 너무 버거워서, 가끔은 모든 것을 놓아버리고 싶을 때가 있어. 가족의 기대, 사회의 요구, 나 자신에 대한 압박. 이 모든 짐들이 나를 짓누르는 것 같아. 숨 쉬는 것조차 힘들게 느껴질 때가 있지. 그런데 살아보니, 이 모든 짐을 내가 다 짊어질 필요가 없다는 걸 알게 됐어. 어떤 짐은 내려놓아야만 하고, 어떤 짐은 다른 사람과 나눠 짊어져야 한다는 걸. 완벽하게 해내려 애쓰기보다, 때로는 불완전해도 괜찮다는 것을 받아들이는 용기가 필요하다는 걸. 이제는 좀 내려놓고 싶어. 가볍게, 홀가분하게, 나만의 속도로 살아가고 싶어. 모든 짐을 다 짊어지고 가지 않아도 괜찮아. 나는 나 자신을 믿고, 내가 짊어질 수 있는 만큼만 짊어질 거야. 그리고 가끔은 아무것도 하지 않을 거야. 그게 내가 나에게 줄 수 있는 가장 큰 휴식이자 선물일 테니까.", "살다 보면, 나를 이해하지 못하는 사람들을 만나게 될 때가 있어. 내 말의 의도를 오해하거나, 내 행동을 비난하거나, 때로는 이유 없이 나를 미워하는 사람들도 있지. 예전에는 그런 사람들 때문에 속상하고 화가 났어. 왜 나를 이해해주지 못할까, 왜 저렇게 판단할까 하는 생각에 괴로웠지. 그런데 이제는 알아. 모든 사람은 자신만의 세상을 살아가고 있다는 것을. 각자의 경험과 상처, 그리고 관점이 다르다는 것을. 내가 그들을 온전히 이해할 수 없듯이, 그들도 나를 온전히 이해할 수 없다는 것을. 이제는 나를 이해하지 못하는 사람들에게도 너그러워지고 싶어. 그들의 다름을 인정하고, 그들의 시선을 존중하고 싶어. 모든 사람이 나를 좋아할 필요도 없고, 모든 사람이 나를 이해할 필요도 없어. 그저 각자의 자리에서 자신만의 삶을 살아가는 것. 그것만으로도 충분하다는 것을 이제는 알 것 같아. 나는 이제 타인의 다름을 포용하며, 나만의 길을 걸어간다.", "낡은 다락방 창문으로 스며드는 오후의 햇살은 먼지 쌓인 시간 위로 부드럽게 내려앉았다. 공기 중에는 오래된 책 냄새와 희미한 나무 향기가 뒤섞여, 마치 잊혀진 이야기들이 낮은 목소리로 속삭이는 듯했다. 빛줄기를 따라 부유하는 작은 먼지들은 금빛 가루처럼 반짝였고, 그 너머로 보이는 바깥세상은 한 폭의 수채화처럼 아련했다. 나는 삐걱이는 나무 계단을 밟고 올라와, 창가 낡은 흔들의자에 가만히 몸을 기댔다. 창밖으로 보이는 느티나무는 수백 년의 세월을 말없이 지켜온 듯, 바람이 불 때마다 잎사귀를 흔들며 낮은 노래를 불렀다. 그 풍경 속에서 나는 어린 시절의 기억들을 하나씩 꺼내보았다. 할머니가 들려주시던 옛날이야기, 친구들과 뛰놀던 골목길의 저녁노을, 처음으로 느껴본 설렘과 아픔. 모든 것이 희미한 필름처럼 머릿속을 스쳐 지나갔지만, 그 감정만큼은 여전히 선명하게 남아 가슴 한구석을 아릿하게 만들었다. 시간은 모든 것을 변화시키지만, 기억 속에 새겨진 온기는 영원히 변치 않는다는 것을, 나는 그 순간 깨달았다. 어쩌면 우리는 모두 마음속에 자신만의 작은 다락방을 가지고 살아가는지도 모른다. 힘들고 지칠 때마다 찾아가 위로받을 수 있는, 소중한 추억들이 잠들어 있는 비밀스러운 공간을.", "깊은 밤, 창밖으로 무수한 별들이 보석처럼 쏟아질 듯 반짝였다. 나는 따뜻한 차 한 잔을 들고 창가에 서서, 끝없이 펼쳐진 밤하늘의 신비를 가만히 응시했다. 어둠이 짙을수록 별빛은 더욱 선명해졌고, 그 고요한 빛줄기는 내 마음속 깊은 곳까지 스며드는 듯했다. 저 멀리 이름 모를 별 하나가 유난히 밝게 빛나고 있었다. 마치 길 잃은 나그네에게 방향을 알려주는 등대처럼, 혹은 간절한 소망을 담아 하늘로 띄워 보낸 작은 등불처럼. 나는 그 별을 보며 어린 시절 순수했던 꿈들을 떠올렸다. 세상을 탐험하는 용감한 모험가, 사람들에게 감동을 주는 예술가, 밤하늘의 비밀을 푸는 천문학자. 현실의 벽에 부딪혀 하나둘씩 접어두었던 그 꿈들이, 별빛 아래에서 다시금 희미하게 살아나는 것을 느꼈다. 어쩌면 꿈이란, 완전히 사라지는 것이 아니라 잠시 우리 마음속 밤하늘에 숨어 반짝일 기회를 기다리는 별과 같은 것일지도 모른다. 중요한 것은 그 별빛을 잊지 않고, 언젠가 다시 그 빛을 따라 나아갈 용기를 내는 것이리라. 나는 마지막 한 모금의 차를 마시며, 내 마음속 별들을 향해 조용히 다짐했다. 아직 끝나지 않은 나의 이야기를 계속 써 내려가겠다고.", "이른 새벽, 안개가 자욱한 호숫가를 홀로 걸었다. 물안개는 마치 살아있는 생명체처럼 부드럽게 수면 위를 감돌았고, 멀리 보이는 산자락은 희미한 먹빛 그림자처럼 느껴졌다. 세상의 모든 소음이 잠든 듯, 오직 내 발걸음 소리와 이따금 들려오는 물새 소리만이 적막을 깨뜨렸다. 차가운 새벽 공기가 코끝을 스치자 정신이 맑아지는 기분이었다. 나는 호숫가 작은 벤치에 앉아, 서서히 밝아오는 동쪽 하늘을 바라보았다. 안개 너머로 붉은 기운이 조금씩 번지기 시작하더니, 이윽고 장엄한 해가 그 모습을 드러냈다. 떠오르는 태양은 밤새 호수를 뒤덮었던 안개를 부드럽게 걷어내었고, 그 아래 숨겨져 있던 맑고 투명한 호수의 민낯이 햇살 아래 눈부시게 반짝였다. 그 순간, 나는 마치 새로운 세상이 열리는 듯한 경이로움을 느꼈다. 어둠과 혼돈 속에서도 희망은 언제나 그렇게 떠오르는 것이라고, 자연은 말없이 가르쳐주는 듯했다. 삶이 때로 짙은 안개 속에 갇힌 것처럼 느껴질 때도 있겠지만, 그 안개 너머에는 분명 찬란한 아침이 기다리고 있음을, 그리고 그 아침을 맞이하기 위해서는 묵묵히 자신의 길을 걸어가야 함을, 나는 새벽 호숫가에서 깨달았다. 해가 완전히 떠오르자, 호수는 금빛으로 물들었고, 나는 새로운 하루를 시작할 용기를 얻어 다시 발걸음을 옮겼다.", "오래된 골목길 모퉁이를 돌자, 담벼락에 기대어 자라는 작은 담쟁이덩굴이 눈에 들어왔다. 거친 시멘트 벽을 가느다란 줄기로 힘겹게 부여잡고, 초록빛 잎사귀들을 햇살을 향해 힘껏 펼치고 있는 모습이었다. 그 작은 생명체의 강인함 앞에서 나는 잠시 발걸음을 멈추었다. 척박한 환경 속에서도 포기하지 않고, 자신의 자리를 묵묵히 지키며 생명의 푸르름을 피워내는 그 모습이 경이롭게 느껴졌다. 어쩌면 우리의 삶도 저 담쟁이덩굴과 크게 다르지 않을지도 모른다. 때로는 거칠고 힘겨운 현실이라는 벽에 부딪히고, 예상치 못한 시련의 바람에 흔들리기도 하지만, 그럼에도 불구하고 우리는 어떻게든 살아남아 자신의 이야기를 써 내려간다. 마음속 깊은 곳에 간직한 작은 희망의 씨앗을 붙들고, 한 뼘이라도 더 햇살을 향해 나아가려 애쓰면서 말이다. 담쟁이덩굴은 화려한 꽃을 피우거나 달콤한 열매를 맺지는 않지만, 그 자체로 충분히 아름답고 의미 있는 존재였다. 그것은 우리에게 말없이 가르쳐주고 있었다. 삶의 가치는 결과에만 있는 것이 아니라, 그 과정을 묵묵히 견뎌내고 자신의 자리에서 최선을 다하는 그 모든 순간에 깃들어 있다는 것을. 나는 작은 담쟁이덩굴에게서 큰 위로와 용기를 얻고, 다시금 내 삶의 담벼락을 향해 한 걸음 내디뎠다.", "늦은 오후, 텅 빈 기차역 플랫폼에 홀로 앉아 곧 떠나갈 기차를 기다렸다. 하늘에는 회색빛 구름이 낮게 드리워져 있었고, 바람은 스산하게 옷깃을 파고들었다. 어디론가 떠나고 싶은 마음과 어딘가에 머무르고 싶은 마음이 교차하는, 그런 묘한 감상에 젖어들었다. 잠시 후, 저 멀리서 기차가 육중한 소리를 내며 플랫폼으로 서서히 들어왔다. 낡았지만 정감 가는 기차의 창문 너머로, 각자의 사연을 안고 떠나는 사람들의 모습이 어렴풋이 보였다. 설렘과 아쉬움, 기대와 불안이 뒤섞인 그들의 표정 속에서 나는 내 삶의 여러 여정들을 떠올렸다. 새로운 시작을 향해 떠났던 길, 아쉬운 이별을 뒤로하고 돌아섰던 길, 목적지도 모른 채 그저 발길 닿는 대로 걸었던 길까지. 그 모든 길 위에서 나는 수많은 사람들을 만났고, 다양한 감정들을 경험했으며, 조금씩 성장해왔다. 기차가 멈춰 서고 문이 열리자, 나는 가방을 고쳐 메고 자리에서 일어섰다. 이번 여정의 끝에는 무엇이 기다리고 있을지 알 수 없지만, 그것 또한 내 삶의 한 페이지를 채워줄 소중한 경험이 될 것이라 믿었다. 기차는 다시 한번 육중한 기적 소리를 내며 천천히 움직이기 시작했고, 나는 창밖으로 멀어져 가는 익숙한 풍경들을 바라보며, 새로운 이야기가 시작될 미지의 공간을 향해 나아갔다.", "작은 도서관 구석, 햇살이 비껴드는 창가 자리에 앉아 오래된 소설책을 펼쳤다. 종이에서는 세월의 흔적이 느껴지는 희미한 냄새가 풍겨왔고, 손때 묻은 페이지들은 수많은 독자들의 이야기를 품고 있는 듯했다. 나는 한 자 한 자 천천히 글자를 따라 읽어 내려가며, 작가가 만들어낸 세계 속으로 깊이 빠져들었다. 그곳에는 내가 미처 경험하지 못한 삶과 감정들이 있었고, 현실에서는 만날 수 없는 매력적인 인물들이 살아가고 있었다. 때로는 주인공의 기쁨에 함께 웃고, 때로는 그의 슬픔에 함께 눈물 흘리며, 나는 책 속의 이야기와 온전히 하나가 되었다. 책을 읽는다는 것은 어쩌면, 시간과 공간을 초월하여 다른 누군가의 삶을 잠시 빌려 살아보는 것과 같은 경험일지도 모른다. 그 경험을 통해 우리는 세상을 바라보는 새로운 시각을 얻고, 인간과 삶에 대한 깊은 이해에 다가서게 된다. 한 권의 책은 때로 백 명의 스승보다 더 큰 가르침을 주기도 하고, 그 어떤 위로보다 더 따뜻한 안식을 선물하기도 한다. 나는 마지막 책장을 덮으며, 마음속에 잔잔하게 퍼지는 깊은 여운을 느꼈다. 책 속에서 만난 이야기와 인물들은 한동안 내 곁을 떠나지 않고, 내 삶의 중요한 일부가 되어 함께할 것 같았다. 그것이 바로 책이 가진 위대한 힘이리라.", "어스름이 내리는 저녁, 나는 강변을 따라 천천히 걷고 있었다. 강물은 해 질 녘의 붉은 노을을 온통 담아내며 고요히 흘러갔고, 강 건너편 도시의 불빛들은 하나둘씩 반짝이기 시작했다. 바람은 잔잔했고, 공기는 상쾌했다. 나는 강둑에 잠시 멈춰 서서, 아름다운 저녁 풍경을 가만히 바라보았다. 매일 반복되는 일상 속에서 우리는 종종 이런 순간의 아름다움을 잊고 살아간다. 하지만 잠시 멈춰 서서 주변을 둘러보면, 세상은 우리가 생각하는 것보다 훨씬 더 다채롭고 경이로운 모습으로 가득 차 있다는 것을 깨닫게 된다. 저녁노을이 만들어내는 황홀한 빛의 향연, 밤하늘을 수놓는 무수한 별들의 반짝임, 이름 모를 풀꽃의 소박한 아름다움까지. 이런 작은 것들 속에 삶의 진정한 기쁨과 위안이 숨겨져 있는지도 모른다. 중요한 것은 그것을 발견할 수 있는 열린 마음과 세상을 바라보는 따뜻한 시선이다. 어둠이 완전히 내려앉고 도시의 불빛이 더욱 선명해지자, 나는 다시 발걸음을 옮겼다. 짧은 산책이었지만, 내 마음은 어느새 평온함과 감사함으로 가득 차 있었다. 일상의 소중함을 다시 한번 깨닫게 해준 아름다운 저녁이었다.", "오랜만에 찾은 고향 집 마당에는 할머니가 심어두신 봉숭아 꽃이 곱게 피어 있었다. 어릴 적, 할머니 손을 잡고 봉숭아 꽃잎을 빻아 손톱에 물들이던 기억이 아련하게 떠올랐다. 빨갛게 물든 작은 손톱을 보며 세상을 다 가진 듯 기뻐했던 그 시절. 그때는 모든 것이 단순했고, 작은 것 하나에도 큰 행복을 느낄 수 있었다. 세월이 흘러 어른이 된 지금, 나는 많은 것을 가졌지만 그때만큼 순수하게 행복하다고 말할 수 있을까. 문득 그런 생각이 들었다. 어쩌면 우리는 성장하면서 세상을 너무 복잡하게 바라보고, 진정한 행복의 의미를 잊어버리는 것은 아닐까. 봉숭아 꽃은 예전과 다름없이 여전히 그 자리에서 소박한 아름다움을 뽐내고 있었다. 그것은 나에게 말없이 가르쳐주는 듯했다. 행복은 멀리 있는 것이 아니라, 바로 우리 마음속에, 그리고 우리가 지나쳐온 소중한 추억들 속에 있다는 것을. 나는 마당 한쪽에 쪼그리고 앉아, 바람에 흔들리는 봉숭아 꽃잎을 한참 동안 바라보았다. 그리고 어린 시절의 나에게, 그리고 지금의 나에게 조용히 속삭였다. 괜찮아, 지금 이 순간을 소중히 여기면 돼. 그것이 바로 행복이야.", "비 내리는 오후, 나는 창가에 앉아 하염없이 창밖을 바라보았다. 굵은 빗방울들이 유리창을 세차게 두드렸고, 세상은 온통 잿빛 물감으로 덧칠한 듯 흐릿했다. 이런 날이면 괜스레 마음이 차분해지고, 평소에는 떠오르지 않던 생각들이 꼬리에 꼬리를 물고 이어지곤 한다. 빗소리는 마치 세상의 모든 소음을 잠재우고, 오직 내면의 목소리에만 귀 기울이도록 만드는 마법과 같았다. 나는 잊고 지냈던 사람들을 떠올리고, 지나간 시간들을 반추하며, 미래의 불확실함에 대해 조용히 고민했다. 어쩌면 비는, 우리에게 잠시 멈춰 서서 자신을 돌아볼 시간을 선물하는 것일지도 모른다. 빠르게 변화하는 세상 속에서 미처 돌보지 못했던 마음의 상처들을 어루만지고, 잊고 지냈던 소중한 가치들을 다시 한번 되새길 수 있도록 말이다. 빗줄기가 조금씩 가늘어지더니, 이윽고 먹구름 사이로 희미한 햇살 한 줄기가 비쳐들었다. 비 온 뒤의 세상은 이전보다 더욱 깨끗하고 싱그러워 보였다. 내 마음도 한바탕 비를 맞고 난 뒤처럼, 한결 가볍고 맑아진 것을 느꼈다. 비는 모든 것을 쓸어내리고, 또다시 새로운 시작을 준비하게 만드는 자연의 경이로운 순환이었다.", "늦가을, 낙엽이 수북이 쌓인 오솔길을 혼자 걸었다. 발걸음을 옮길 때마다 바스락거리는 낙엽 소리가 정겹게 들려왔고, 코끝에는 쌉싸름하면서도 향긋한 가을 냄새가 스며들었다. 하늘은 더없이 높고 푸르렀으며, 나뭇가지 사이로 부서지는 햇살은 따스했다. 나는 천천히 걸으며, 화려했던 여름을 보내고 이제 겨울을 맞이할 준비를 하는 자연의 모습을 가만히 관찰했다. 울긋불긋 아름다운 색으로 물들었던 단풍잎들은 이제 마지막 빛을 발하며 땅으로 떨어져 내렸고, 앙상한 가지만 남은 나무들은 다가올 추위를 묵묵히 견뎌낼 준비를 하는 듯했다. 그 모습에서 나는 삶의 순환과 자연의 섭리를 느꼈다. 모든 것에는 시작과 끝이 있고, 성장의 시간이 있으면 쇠퇴의 시간도 있으며, 화려한 순간이 있으면 고요한 침묵의 순간도 있다는 것을. 그리고 그 모든 과정은 그 자체로 의미 있고 아름답다는 것을. 낙엽은 끝이 아니라 새로운 시작을 위한 준비였다. 땅으로 돌아가 거름이 되어, 다음 해 봄에 새로운 생명이 움틀 수 있도록 자신을 내어주는 것이다. 나는 깊어가는 가을의 정취 속에서, 삶의 유한함과 그 속에서 우리가 가져야 할 겸손함, 그리고 모든 것을 받아들이고 순응하는 지혜에 대해 생각했다. 낙엽 밟는 소리가 배경음악처럼 깔리는 그 길 위에서, 나는 자연이 주는 깊은 위안과 가르침을 얻었다.", "바람이 세차게 불던 어느 겨울날, 나는 바닷가 작은 등대를 찾아갔다. 하얀 포말을 일으키며 거칠게 밀려오는 파도와 매서운 바닷바람 속에서도 등대는 조금의 흔들림 없이 굳건히 서 있었다. 그 모습은 마치 세상의 온갖 풍파를 견뎌내며 자신의 자리를 지키는 고독한 수호자 같았다. 어둠이 내리면 등대는 어김없이 밝은 빛을 발하여, 밤바다를 항해하는 배들에게 길을 안내할 것이다. 그 빛은 단순한 불빛이 아니라, 험난한 바다 위에서 길을 잃은 이들에게 희망과 안도를 주는 생명의 빛이리라. 나는 문득 우리 삶에도 저런 등대와 같은 존재가 필요하다는 생각을 했다. 때로는 거친 파도처럼 힘겨운 시련이 몰아치고, 짙은 안개처럼 방향을 잃고 방황할 때, 우리를 올바른 길로 인도해주고 마음의 등불이 되어줄 그런 존재 말이다. 그것은 때로는 현명한 조언을 해주는 스승일 수도 있고, 변함없는 사랑을 주는 가족일 수도 있으며, 혹은 마음속 깊이 간직한 신념이나 가치관일 수도 있다. 중요한 것은 자신만의 등대를 가지고, 그 빛을 따라 꿋꿋이 나아가는 것이다. 세찬 바람 속에서도 묵묵히 빛을 밝히는 등대를 바라보며, 나는 내 삶의 등대는 무엇인지 다시 한번 생각해보았다.", "어린 시절, 동네 어귀에는 커다란 플라타너스 나무가 한 그루 서 있었다. 여름이면 무성한 잎으로 시원한 그늘을 만들어주었고, 가을이면 황금빛 낙엽을 아름답게 흩날렸으며, 겨울이면 앙상한 가지에 눈꽃을 피워 장관을 이루었다. 그 나무 아래는 언제나 아이들의 웃음소리가 끊이지 않는 놀이터였고, 동네 어른들의 정겨운 이야기가 오가는 쉼터였다. 나는 그 나무 아래에서 친구들과 술래잡기를 하고, 딱지치기를 하고, 때로는 가만히 앉아 하늘을 바라보며 엉뚱한 상상에 빠지기도 했다. 플라타너스 나무는 나의 유년 시절 모든 기억을 말없이 지켜봐 준 든든한 친구이자 보호자였다. 세월이 흘러 나는 어른이 되었고, 그 동네를 떠나온 지도 오래되었다. 하지만 문득 그 플라타너스 나무가 그리워질 때가 있다. 모든 것이 빠르게 변해가는 이 세상 속에서, 변함없이 그 자리를 지키고 있을 것 같은 그 나무의 존재가 주는 안정감 때문일까. 어쩌면 그 나무는 나에게 단순한 나무 이상의 의미였는지도 모른다. 그것은 돌아갈 수 없는 아름다운 시절에 대한 그리움이자, 순수했던 마음을 다시 찾고 싶은 작은 소망의 상징이었을 것이다. 언젠가 다시 그 나무 아래 서면, 나는 잠시나마 모든 것을 잊고 어린 시절의 나로 돌아갈 수 있을 것만 같다.", "나는 가끔 오래된 엘피판을 꺼내 턴테이블 위에 올려놓는다. 지지직거리는 작은 소음과 함께 바늘이 레코드의 검은 골을 따라 천천히 움직이기 시작하면, 곧이어 따뜻하고 풍부한 아날로그 사운드가 공간을 가득 채운다. 디지털 음원에서는 느낄 수 없는 그 특유의 깊이와 온기는 마치 시간 여행을 하는 듯한 묘한 감흥을 불러일으킨다. 엘피판 한 장에는 단순히 음악만 담겨 있는 것이 아니다. 그 음악이 유행했던 시대의 공기, 그 음악을 함께 들었던 사람들과의 추억, 그리고 그 음악을 들으며 느꼈던 나의 젊은 날의 감정들이 고스란히 담겨 있다. 그래서 엘피를 듣는 것은 단순한 음악 감상을 넘어, 지나간 시간과의 조우이자 잊혀진 기억과의 재회이기도 하다. 때로는 빛바랜 앨범 재킷을 어루만지며 그 시절을 추억하고, 때로는 가사를 음미하며 그 의미를 되새기기도 한다. 세상은 점점 더 빠르고 편리한 것을 추구하지만, 나는 가끔 이렇게 느리고 불편한 아날로그의 세계에 머무르는 것을 좋아한다. 그 속에는 디지털이 결코 흉내 낼 수 없는 인간적인 따뜻함과 시간의 깊이가 존재하기 때문이다. 엘피판이 돌아가는 것을 가만히 바라보며, 나는 오늘도 잊혀진 시간 속으로 짧은 여행을 떠난다.", "작은 시골 간이역, 해 질 녘 플랫폼에는 기차를 기다리는 사람들보다 먼저 와 자리를 잡은 저녁노을이 더 짙었다. 나는 낡은 나무 의자에 앉아, 서쪽 하늘을 붉게 물들이며 서서히 스러져가는 노을의 마지막 장관을 바라보았다. 세상의 모든 색을 다 끌어모은 듯한 그 찬란한 빛의 향연 앞에서, 인간의 언어는 한없이 초라하게 느껴졌다. 노을은 낮과 밤의 경계에서 피어나는 짧지만 강렬한 예술과 같았다. 뜨거웠던 하루의 열정을 모두 불태우고, 이제 고요한 휴식의 시간으로 접어들기 위한 마지막 인사처럼. 나는 그 아름다움에 매료되어 한동안 아무 말도 할 수 없었다. 잠시 후, 노을이 완전히 자취를 감추고 어둠이 내려앉자, 하늘에는 하나둘씩 별들이 모습을 드러내기 시작했다. 그것은 마치 화려한 무대가 끝나고 다음 막이 오르기 전의 고요한 설렘과도 같았다. 삶에도 저런 노을과 같은 순간들이 있을 것이다. 모든 것을 쏟아부은 뒤 맞이하는 찬란한 마무리, 그리고 새로운 시작을 예비하는 고요한 성찰의 시간. 우리는 그 순간들을 통해 지나온 길을 돌아보고, 앞으로 나아갈 힘을 얻는다. 나는 깊어가는 밤의 적막 속에서, 오늘 하루 나에게 주어진 시간과 경험들에 감사하며, 내일 또다시 떠오를 새로운 태양을 기다렸다.", "나는 오래된 만년필로 일기를 쓰는 것을 좋아한다. 사각거리는 펜촉이 종이 위를 스치는 소리, 손끝으로 전해져 오는 잉크의 미세한 흐름, 그리고 한 자 한 자 정성스럽게 써 내려가는 글자들이 만들어내는 그 모든 과정이 나에게는 작은 의식과도 같다. 디지털 시대에 손으로 글을 쓴다는 것은 어쩌면 비효율적이고 번거로운 일일지도 모른다. 하지만 나는 그 느림과 불편함 속에서 오히려 더 깊은 사색과 진정한 자기표현의 즐거움을 발견한다. 컴퓨터 자판으로는 미처 담아낼 수 없는 생각의 결들과 감정의 미묘한 떨림들이, 만년필을 통해 종이 위에 고스란히 새겨지는 것을 느낀다. 일기장에는 그날 있었던 소소한 사건들뿐만 아니라, 마음속 깊은 곳에 숨겨두었던 생각들, 누구에게도 말하지 못했던 비밀들, 그리고 미래에 대한 막연한 기대와 불안까지 모든 것이 담긴다. 그것은 오롯이 나 자신과 마주하는 시간이며, 내 삶의 발자취를 기록하는 소중한 작업이다. 훗날 이 일기장을 다시 펼쳐보았을 때, 나는 지금 이 순간의 나를 만나고, 그 시절의 고민과 기쁨을 공유하며, 내가 얼마나 성장했는지를 돌아볼 수 있을 것이다. 만년필의 잉크가 마르듯 시간은 흘러가겠지만, 종이 위에 남겨진 나의 이야기는 영원히 그 자리에 남아 빛날 것이다.", "어느 늦봄, 나는 이름 모를 작은 산사의 툇마루에 앉아 있었다. 산사는 깊은 산속에 고즈넉이 자리 잡아, 세상의 모든 번뇌와 소음으로부터 벗어난 듯 평화로웠다. 처마 끝에 매달린 풍경은 바람이 불 때마다 맑고 청아한 소리를 냈고, 그 소리는 내 마음속까지 잔잔하게 울려 퍼졌다. 마당에는 수령을 알 수 없는 오래된 매화나무 한 그루가 마지막 꽃잎을 떨구고 있었고, 그 아래에는 작은 새 한 마리가 날아와 지저귀고 있었다. 나는 눈을 감고 가만히 그 모든 소리와 풍경을 마음에 담았다. 자연의 소리는 그 어떤 음악보다 아름다웠고, 산사의 고요함은 그 어떤 명상보다 깊은 평화를 가져다주었다. 복잡했던 머릿속은 어느새 텅 비고, 무거웠던 마음은 한결 가벼워졌다. 우리는 종종 너무 많은 것을 보고 듣고 생각하며 살아간다. 그래서 정작 중요한 내면의 소리에는 귀 기울이지 못하고, 진정한 휴식의 의미를 잊어버리곤 한다. 하지만 이렇게 잠시 모든 것을 내려놓고 자연 속에 머무르다 보면, 비로소 우리가 얼마나 작은 존재인지, 그리고 우리가 진정으로 추구해야 할 가치는 무엇인지 깨닫게 된다. 풍경 소리가 다시 한번 맑게 울리자, 나는 깊은 숨을 내쉬며 자리에서 일어섰다. 짧은 시간이었지만, 산사가 준 깊은 평화와 깨달음은 오랫동안 내 마음속에 남아 있을 것 같았다.", "나는 가끔 오래된 흑백사진을 들여다본다. 빛바랜 사진 속에는 지금은 만날 수 없는 사람들의 미소와 다시 돌아갈 수 없는 풍경들이 담겨 있다. 컬러사진이 현실을 있는 그대로 생생하게 재현한다면, 흑백사진은 현실 너머의 어떤 아련한 감성과 시간의 깊이를 느끼게 해주는 묘한 매력이 있다. 색이 사라진 세상은 오히려 더 많은 것을 상상하게 만들고, 인물의 표정과 배경의 분위기에 더욱 집중하게 만든다. 사진 속 인물들은 어떤 이야기를 간직하고 있을까, 그들은 어떤 꿈을 꾸고 어떤 사랑을 했을까. 나는 그런 상상을 하며 사진 속 시간으로 잠시 여행을 떠나곤 한다. 흑백사진은 단순한 기록이 아니라, 한 시대의 초상이자 누군가의 삶의 증거이다. 그 속에는 기쁨과 슬픔, 만남과 이별, 희망과 절망 등 인간이 겪을 수 있는 모든 감정들이 응축되어 있다. 그래서 흑백사진을 보고 있으면, 때로는 알 수 없는 그리움에 가슴이 아련해지기도 하고, 때로는 삶의 숙연함에 고개가 숙여지기도 한다. 사진 한 장이 건네는 수많은 이야기들. 나는 그 이야기들을 통해 과거와 현재를 잇고, 사라진 시간 속에서 변치 않는 가치를 발견한다. 흑백사진은 나에게 침묵으로 더 많은 것을 말해주는 오래된 친구와 같다.", "한겨울 밤, 창밖에는 하얀 눈이 소리 없이 내리고 있었다. 나는 따뜻한 코코아 한 잔을 들고 창가에 서서, 밤새 세상을 하얗게 뒤덮을 것 같은 눈송이들을 하염없이 바라보았다. 가로등 불빛 아래 춤추듯 흩날리는 눈송이들은 마치 동화 속 한 장면처럼 비현실적으로 아름다웠다. 눈은 세상의 모든 더러움과 소음을 하얗게 덮어버리고, 고요하고 순수한 평화를 가져다주는 것 같았다. 나는 어린아이처럼 창문에 입김을 불어 작은 그림을 그리기도 하고, 손을 내밀어 차가운 눈송이를 직접 만져보기도 했다. 눈이 내리는 풍경은 언제나 나를 설레게 하고, 잊고 지냈던 동심을 일깨워준다. 어쩌면 눈은, 하늘이 우리에게 보내는 하얀 편지일지도 모른다. 잠시 모든 것을 잊고 순수한 기쁨을 느껴보라고, 그리고 새로운 시작을 준비하라고 속삭이는 아름다운 편지. 나는 코코아의 마지막 한 모금을 마시며, 내일 아침 눈부시게 펼쳐질 하얀 세상을 상상했다. 발자국 하나 없는 깨끗한 눈밭 위를 처음으로 걷는 기분은 얼마나 상쾌할까. 눈이 그치고 아침이 오면, 나는 가장 먼저 하얀 세상 속으로 달려 나가, 겨울이 주는 특별한 선물을 만끽할 것이다.", "나는 가끔 오래된 시장을 찾는 것을 좋아한다. 대형마트의 깔끔함과 편리함도 좋지만, 시장에는 그곳에서만 느낄 수 있는 특별한 활기와 정겨움이 있다. 좌판 가득 싱싱한 채소와 과일을 진열해놓고 구성진 목소리로 손님을 부르는 상인들, 흥정을 하며 덤을 얻어가는 손님들의 웃음소리, 맛있는 냄새를 풍기며 발길을 유혹하는 길거리 음식들까지. 시장은 살아있는 사람들의 이야기로 가득한 공간이다. 나는 천천히 시장 골목을 걸으며, 다양한 물건들을 구경하고 사람들의 살아가는 모습을 관찰한다. 그 속에서 나는 잊고 지냈던 인간적인 따뜻함과 소박한 삶의 아름다움을 발견한다. 시장 상인들의 거친 손마디에는 정직한 땀의 가치가 담겨 있고, 그들의 구릿빛 얼굴에는 세월의 흔적과 삶의 지혜가 새겨져 있다. 그들은 단순히 물건을 파는 것이 아니라, 자신의 삶을 나누고 사람들과 정을 주고받는다. 그래서 시장에서의 거래는 단순한 매매를 넘어, 따뜻한 인간관계의 한 형태가 된다. 나는 시장 한구석 작은 분식집에 앉아 뜨끈한 어묵 국물을 마시며, 시장의 활기찬 풍경을 다시 한번 눈에 담았다. 이곳에는 여전히 변치 않는 사람 사는 냄새가 있었고, 그것이 나를 위로하고 새로운 힘을 주는 것 같았다."], engLong: [ "The old attic window, streaked with the dust of ages, allowed the afternoon sun to filter in, casting a soft, golden glow over forgotten treasures. The air hung heavy with the scent of aged paper and faint wood, a nostalgic perfume that seemed to whisper tales of bygone eras. Tiny dust motes danced in the invading sunbeams, sparkling like miniature galaxies, and the world outside, viewed through the grimy pane, appeared as a distant, dreamlike watercolor. I had creaked my way up the wooden stairs, settling into the worn comfort of a rocking chair by the window. Below, an ancient oak stood sentinel, its leaves rustling a quiet, timeless song with every breeze, a silent observer of centuries unfolding. In that tranquil tableau, I found myself sifting through childhood memories: a grandmother's gentle voice narrating fairy tales, the vibrant hues of a sunset over a familiar alleyway, the first stirrings of a young heart's joy and sorrow. Time, in its relentless march, may alter all things, yet the warmth embedded in memory, I realized, remains an immutable sanctuary. Perhaps we all carry a small, secret attic within our souls, a place of solace filled with cherished recollections, a haven to retreat to when the world outside grows too loud.", "Under the velvet cloak of a moonless night, countless stars were scattered across the celestial canvas like diamonds on black silk. With a warm cup of herbal tea cradled in my hands, I stood by the window, lost in the profound mystery of the infinite expanse. The deeper the darkness, the more intensely the starlight seemed to pierce through, its serene luminescence seeping into the very core of my being. One distant, unnamed star shone with a particular brilliance, a beacon for a lost traveler, perhaps, or a tiny lantern carrying a whispered wish to the heavens. Gazing at it, I was transported back to the untainted dreams of youth: a daring explorer charting unknown territories, an artist evoking profound emotions, an astronomer unraveling cosmic secrets. Those aspirations, once so vivid but gradually set aside against the unyielding walls of reality, flickered faintly back to life under the starlight. Maybe dreams never truly vanish; perhaps they merely slumber in the night sky of our hearts, awaiting the courage to be pursued once more. As I sipped the last of my tea, I made a quiet promise to those stars, and to myself: to keep writing the unfinished chapters of my own story, guided by their distant, unwavering light.", "The scent of pine needles and damp earth filled the air as she walked deeper into the ancient woods. Sunlight struggled to penetrate the thick canopy, casting an ethereal, green-tinged light on the forest floor. Moss grew like velvet on the trunks and branches of old trees, and delicate ferns uncurled their fronds in the damp places where shadows lingered. She paused by a gnarled oak, its bark a tapestry of a thousand storms weathered and a thousand suns embraced. It seemed to whisper secrets of the ages, of creatures seen and unseen, of seasons turning in an endless, graceful dance. Here, away from the clamor of human invention, she felt a profound connection to something primal, something enduring. The forest was not merely a collection of trees, but a living, breathing entity, a sanctuary for the soul seeking quietude and a reminder of the intricate beauty of the natural world. Each fallen leaf crunched underfoot was a note in an ancient song, a testament to the cycle of life, death, and renewal, a humbling perspective in the grand theatre of existence.", "In the heart of the bustling city, there existed a small, almost forgotten courtyard, a tiny oasis of green amidst the towering steel and glass. Ivy climbed the old brick walls, and a single, resilient cherry tree bloomed defiantly each spring, its blossoms a soft pink rebellion against the urban grey. Few knew of this place, tucked away behind a narrow alley, and those who did cherished it as a secret haven. Here, the city's roar subsided to a distant hum, and one could hear the cooing of pigeons or the rustle of leaves in the gentle breeze. It was a place for quiet contemplation, for stolen moments of peace in a world that seldom seemed to pause. Sometimes, an artist would sit on the worn stone bench, sketching the play of light and shadow, or a writer would fill a notebook with fleeting thoughts and observations, inspired by the unexpected tranquility found in such an urban pocket of serenity. This courtyard was a reminder that even in the most concrete of jungles, nature, and a moment's peace, could always find a way to endure.", "The old lighthouse stood sentinel on the jagged cliff, its stoic form a familiar silhouette against the turbulent, grey sky. For generations, its beam had cut through the darkest storms, a steadfast promise of guidance to sailors navigating the treacherous coastal waters. The keeper, a man with a weather-beaten face and eyes that held the wisdom of the sea, lived a solitary life, his only companions the cry of gulls and the ceaseless rhythm of the waves. He knew every mood of the ocean, from its gentle summer caress to its furious winter rage. His days were marked by routine: tending the great lamp, polishing the massive Fresnel lens, and scanning the horizon for any sign of a vessel in distress. It was a life of responsibility, of quiet dedication to a purpose larger than himself. The lighthouse was more than just a structure of stone and light; it was a symbol of hope, a beacon of resilience against the raw, untamed power of nature, and a testament to the enduring human spirit that sought to illuminate the darkness and bring wanderers safely home, a silent guardian watching over the restless sea.", "A gentle rain began to fall as evening descended, a soft, persistent patter against the windowpanes. Inside, the warmth of the hearth cast a flickering, amber glow across the room, a stark contrast to the cool, damp air outside. She sat curled in an old armchair, a half-read book resting in her lap, a pensive expression on her face. The rain was a soothing melody, a lullaby that seemed to wash away the day's accumulated anxieties and quiet the relentless chatter of the mind. It was on nights like these, cocooned in the quiet solitude of her home, that her thoughts roamed free, unburdened by the demands of the world. She pondered the intricate tapestry of human connection, the fragile threads that bound one soul to another, the unexpected joys and inevitable sorrows that colored the human experience. The rhythmic drumming of the rain provided a comforting backdrop to her reflections, a reminder of nature's constant, gentle presence, and the quiet beauty to be found in a simple, rainy evening spent in peaceful contemplation.", "The desert stretched out before him, an endless expanse of undulating dunes under a sky so vast it seemed to swallow the horizon. The sun beat down relentlessly, and the air shimmered with an almost palpable heat. Yet, amidst this harsh and unforgiving landscape, there was a stark, austere beauty that captivated the soul. The way the wind sculpted the sand into ever-changing, sinuous patterns, the resilience of the sparse, thorny vegetation clinging stubbornly to life, the profound, almost deafening silence broken only by the whisper of the breeze – it all spoke of a raw, primal power and an ancient, unyielding spirit. He had come here seeking solitude, a place where the distractions and superficialities of the modern world would fade into insignificance, allowing him to confront the unadorned truths of his own existence. In the vast emptiness, he found not desolation, but a strange kind of freedom, a clarity that only such an elemental landscape could provide. The desert, in its starkness, mirrored the landscape of his own inner world, challenging and ultimately, offering a path to understanding."]
};

document.addEventListener('DOMContentLoaded', () => {
  toggleSoundBtn = document.getElementById('toggleSoundBtn');
  toggleHighlightBtn = document.getElementById('toggleHighlightBtn');
  lineDisplayArea = document.getElementById('line-display-area');
  typingInputField = document.getElementById('typing-input-field');
  resultEl = document.getElementById('result');
  upcomingLinesArea = document.getElementById('upcoming-lines-area');
  soundPackSelectEl = document.getElementById('soundPackSelect');
  themeSelectEl = document.getElementById('themeSelect');
  toggleStatsBtn = document.getElementById('toggleStatsBtn');
  gameModeBtnEl = document.getElementById('gameModeBtn');
  progressBarContainerEl = document.querySelector('.progress-bar-container');
  progressBarEl = document.querySelector('.progress-bar');
  statsEl = document.getElementById('stats');
  gameAreaContainerEl = document.getElementById('game-area-container');


  if (![lineDisplayArea, typingInputField, toggleSoundBtn, toggleHighlightBtn, resultEl, upcomingLinesArea, soundPackSelectEl, themeSelectEl, toggleStatsBtn, gameModeBtnEl, progressBarContainerEl, progressBarEl, statsEl, gameAreaContainerEl].every(el => el)) {
      console.error("하나 이상의 필수 HTML 요소를 찾을 수 없습니다.");
      if (resultEl) resultEl.textContent = "페이지 로딩 오류.";
      return;
  }

  soundPackSelectEl.value = currentSoundPack;

  const savedTheme = localStorage.getItem('typingTheme') || 'dark';
  applyTheme(savedTheme); // Apply theme and set variables
  themeSelectEl.value = savedTheme;


  initializeAudioPool();
  startPractice('kor', true);

  if (soundEnabled) {
      toggleSoundBtn.classList.add('active');
      toggleSoundBtn.innerHTML = '<i class="fas fa-volume-up"></i> 타건음 ON';
  } else {
      toggleSoundBtn.classList.remove('active');
      toggleSoundBtn.innerHTML = '<i class="fas fa-volume-mute"></i> 타건음 OFF';
  }
  if (statsVisible) {
    toggleStatsBtn.classList.add('active');
    toggleStatsBtn.innerHTML = '<i class="fas fa-chart-line"></i> 측정 ON';
    statsEl.classList.remove('hidden');
  } else {
    toggleStatsBtn.classList.remove('active');
    toggleStatsBtn.innerHTML = '<i class="fas fa-eye-slash"></i> 측정 OFF';
    statsEl.classList.add('hidden');
  }

  typingInputField.addEventListener('input', handleInputEvent);
  typingInputField.addEventListener('keydown', handleKeyDownEvent);

  toggleSoundBtn.addEventListener('click', () => {
    soundEnabled = !soundEnabled;
    toggleSoundBtn.classList.toggle('active', soundEnabled);
    toggleSoundBtn.innerHTML = soundEnabled ? '<i class="fas fa-volume-up"></i> 타건음 ON' : '<i class="fas fa-volume-mute"></i> 타건음 OFF';
  });
  toggleHighlightBtn.addEventListener('click', () => {
    highlightEnabled = !highlightEnabled;
    toggleHighlightBtn.classList.toggle('active', highlightEnabled);
    toggleHighlightBtn.innerHTML = highlightEnabled ? '<i class="fas fa-highlighter"></i> 오타체크 ON' : '<i class="far fa-eye-slash"></i> 오타체크 OFF';
    const currentLineEl = document.getElementById('current-typing-line');
    if (currentLineEl && linesToPractice[currentDisplayLineIndex] !== undefined) {
        handleHighlightUpdate(currentLineEl, typingInputField.value, linesToPractice[currentDisplayLineIndex]);
    }
  });
  soundPackSelectEl.addEventListener('change', (event) => {
    currentSoundPack = event.target.value;
    if (audioPool[currentSoundPack] && (audioPointer[currentSoundPack] === undefined || audioPointer[currentSoundPack] === null) ) {
        audioPointer[currentSoundPack] = 0;
    } else if (!audioPool[currentSoundPack]) {
        initializeAudioPoolForPack(currentSoundPack);
    }
  });

  themeSelectEl.addEventListener('change', (event) => {
    const selectedTheme = event.target.value;
    applyTheme(selectedTheme);
    localStorage.setItem('typingTheme', selectedTheme);
  });

  toggleStatsBtn.addEventListener('click', () => {
    statsVisible = !statsVisible;
    toggleStatsBtn.classList.toggle('active', statsVisible);
    toggleStatsBtn.innerHTML = statsVisible ? '<i class="fas fa-chart-line"></i> 측정 ON' : '<i class="fas fa-eye-slash"></i> 측정 OFF';
    statsEl.classList.toggle('hidden', !statsVisible);
  });

});

function applyTheme(theme) {
    document.body.classList.remove('light-theme', 'pink-theme'); // Remove all theme classes first
    const rootStyle = document.documentElement.style;

    if (theme === 'light') {
        document.body.classList.add('light-theme');
        rootStyle.setProperty('--accent-rgb', '184, 154, 108');
        rootStyle.setProperty('--accent-primary-rgb', '184, 154, 108');
        rootStyle.setProperty('--bg-container-rgb', '255, 255, 255');
    } else if (theme === 'pink') {
        document.body.classList.add('pink-theme');
        rootStyle.setProperty('--accent-rgb', '232, 93, 117');
        rootStyle.setProperty('--accent-primary-rgb', '232, 93, 117');
        rootStyle.setProperty('--bg-container-rgb', '255, 255, 255');
    } else { // dark (default)
        rootStyle.setProperty('--accent-rgb', '212, 175, 122');
        rootStyle.setProperty('--accent-primary-rgb', '212, 175, 122');
        rootStyle.setProperty('--bg-container-rgb', '42, 40, 38');
    }
}


function initializeAudioPoolForPack(packKey) {
    if (soundFiles.hasOwnProperty(packKey) && (!audioPool[packKey] || audioPool[packKey].length === 0)) {
        audioPool[packKey] = [];
        audioPointer[packKey] = 0;
        for (let i = 0; i < MAX_AUDIO_OBJECTS; i++) {
            const audio = new Audio();
            audio.preload = 'auto';
            audioPool[packKey].push(audio);
        }
    }
}

function initializeAudioPool() {
    for (const packKey in soundFiles) {
        initializeAudioPoolForPack(packKey);
    }
}

// --- Removed game logic functions ---

function startPractice(mode, resetSessionStats = false) {
    // If coming from "game development notice" mode, clear that area
    if (currentMode === 'game_dev_notice') {
        if (gameAreaContainerEl) {
            gameAreaContainerEl.style.display = 'none';
            gameAreaContainerEl.innerHTML = ''; // Clear content
        }
    }

    currentMode = mode;
    // Show practice UI elements
    document.querySelector('.typing-area-container').style.display = 'flex';
    if (document.getElementById('typing-input-field-container')) {
        document.getElementById('typing-input-field-container').style.display = 'block';
    }
    if (typingInputField) {
        typingInputField.disabled = false;
        typingInputField.placeholder = '';
    }

    // Update active button states
    document.querySelectorAll('.practice-mode-controls button').forEach(btn => {
        btn.classList.remove('active');
        const btnOnClick = btn.getAttribute('onclick');
        if (btnOnClick && btnOnClick.includes(`startPractice('${mode}'`)) {
             btn.classList.add('active');
        }
    });
    if (gameModeBtnEl) gameModeBtnEl.classList.remove('active');

    if (statsVisible && statsEl) statsEl.classList.remove('hidden');


    sessionResetInProgress = resetSessionStats;
    if (resetSessionStats) {
        overallMaxSpeed = 0; overallAvgSpeedLog = [];
        sessionTotalValidChars = 0; sessionTotalCorrectChars = 0; sessionTotalMistypedChars = 0;
        lastArticleSpeed = 0;
    }
    startTime = null; currentLineStartTime = null;
    currentArticleCorrectChars = 0; currentDisplayLineIndex = 0;

    const poolToUse = sentencePool[currentMode];
    let textToPractice = getRandom(poolToUse);
    if (!textToPractice && poolToUse && poolToUse.length > 0) textToPractice = poolToUse[0];
    if (!textToPractice) textToPractice = "예문 로딩에 실패했습니다. 선택하신 모드에 예문이 없을 수 있습니다.";

    linesToPractice = splitTextIntoLines(textToPractice, currentMode, window.innerWidth);

    if (linesToPractice.length === 0) {
        linesToPractice.push(textToPractice.includes("실패") ? textToPractice : "예문 처리 중 오류가 발생했습니다.");
    }

    // Moved progress bar visibility logic AFTER linesToPractice is set
    if (currentMode.includes('Long') && linesToPractice.length > 1) {
        if(progressBarContainerEl) progressBarContainerEl.style.display = 'block';
    } else {
        if(progressBarContainerEl) progressBarContainerEl.style.display = 'none';
    }

    renderTypingLayout();
    if(typingInputField) typingInputField.value = '';

    if(resultEl) resultEl.textContent = '타자를 시작하세요!';
    updateStatsDisplay(true);
    updateProgressBar(); // This ensures the bar is filled correctly if visible

    setTimeout(() => { if(typingInputField) typingInputField.focus(); }, 50);
    sessionResetInProgress = false;
}

function startGameModeSelection() {
    currentMode = 'game_dev_notice';

    // Hide practice UI elements
    document.querySelector('.typing-area-container').style.display = 'none';
    if (progressBarContainerEl) progressBarContainerEl.style.display = 'none';
    if (statsEl) statsEl.classList.add('hidden');
    if (document.getElementById('typing-input-field-container')) {
      document.getElementById('typing-input-field-container').style.display = 'none';
    }
    if (typingInputField) {
        typingInputField.disabled = true;
        typingInputField.value = '';
    }


    // Show "under development" notice
    if (gameAreaContainerEl) {
        gameAreaContainerEl.style.display = 'flex'; // Use flex for centering
        gameAreaContainerEl.innerHTML = `
            <h2><i class="fas fa-cogs"></i> 게임 모드 개발 중</h2>
            <p>더욱 즐거운 타자 경험을 위한 게임 기능을 준비하고 있습니다.<br>조금만 기다려주세요!</p>
            <button onclick="startPractice('kor', true)" class="btn-return-to-practice">
                <i class="fas fa-keyboard"></i> 연습 모드로 돌아가기
            </button>
        `;
    }

    // Update button active states
    document.querySelectorAll('.practice-mode-controls button').forEach(btn => {
        if (btn.id !== 'gameModeBtn') {
            btn.classList.remove('active');
        }
    });
    if (gameModeBtnEl) gameModeBtnEl.classList.add('active');
}


function splitTextIntoLines(text, mode, screenWidth) {
    let maxLength;
    // 장문일 경우 화면 너비에 따라 글자 수 제한 다르게 적용
    if (mode.includes('Long')) {
        if (screenWidth <= 480) { // 모바일 화면 (가장 작은 너비 기준)
            maxLength = mode.includes('eng') ? 40 : 25;
        } else if (screenWidth <= 768) { // 태블릿 화면
            maxLength = mode.includes('eng') ? 55 : 35;
        } else { // 데스크탑 화면
            maxLength = mode.includes('eng') ? 65 : 40;
        }
    } else { // 단문은 한 줄로 처리 (매우 긴 단문 방지용 최대치)
        maxLength = 1000;
    }


    const lines = [];
    if (!text || typeof text !== 'string') return [""];
    if (maxLength === 1000 || !mode.includes('Long')) { // 단문이거나 장문 분리 비활성화 시
        lines.push(text.trim());
    }
    else { // 장문 분리 로직
        let currentLine = "";
        const words = text.split(/(\s+)/); // 공백도 하나의 단어로 취급하여 유지

        for (const word of words) {
            // 현재 줄에 단어를 추가했을 때 maxLength를 초과하고, 현재 단어가 공백이 아닌 경우 줄바꿈
            if (currentLine.length > 0 && currentLine.length + word.trim().length > maxLength && !/^\s+$/.test(word)) {
                lines.push(currentLine.trim());
                currentLine = ""; // 새 줄 시작
            }
            currentLine += word;
        }
        // 마지막 줄 추가
        if (currentLine.trim().length > 0) {
            lines.push(currentLine.trim());
        }
    }
    return lines.length > 0 ? lines : [text.trim()]; // 빈 배열 반환 방지
}


const MAX_VISIBLE_UPCOMING_LINES = 5;
function renderTypingLayout() {
    if (!lineDisplayArea || !upcomingLinesArea) return;
    lineDisplayArea.innerHTML = ''; upcomingLinesArea.innerHTML = '';
    const fragmentPassedCurrent = document.createDocumentFragment();
    const fragmentUpcoming = document.createDocumentFragment();

    const passedLineText = (currentDisplayLineIndex > 0 && linesToPractice[currentDisplayLineIndex - 1] !== undefined) ? linesToPractice[currentDisplayLineIndex - 1] : " ";
    const passedEl = document.createElement('div');
    passedEl.classList.add('typing-line', 'passed');
    passedEl.innerHTML = passedLineText.replace(/ /g, ' ');
    if (passedLineText === " ") passedEl.style.visibility = 'hidden';
    fragmentPassedCurrent.appendChild(passedEl);

    const currentLineText = (currentDisplayLineIndex < linesToPractice.length) ? linesToPractice[currentDisplayLineIndex] : "";
    const currentEl = document.createElement('div');
    currentEl.id = 'current-typing-line';
    currentEl.classList.add('typing-line');

    if (currentLineText !== null && currentLineText !== undefined && currentLineText.length > 0) {
        currentEl.classList.add('current-to-type');
        currentEl.dataset.originalLine = currentLineText;
        handleHighlightUpdate(currentEl, "", currentLineText);
    } else {
        currentEl.innerHTML = ' ';
        currentEl.style.boxShadow = 'none';
        currentEl.style.backgroundColor = 'transparent';
        currentEl.style.border = '1px solid transparent';
    }
    fragmentPassedCurrent.appendChild(currentEl);
    lineDisplayArea.appendChild(fragmentPassedCurrent);

    for (let i = 1; i <= MAX_VISIBLE_UPCOMING_LINES; i++) {
        const upcomingIndex = currentDisplayLineIndex + i;
        const upcomingLineText = (upcomingIndex < linesToPractice.length && linesToPractice[upcomingIndex] !== undefined) ? linesToPractice[upcomingIndex] : " ";
        const upcomingEl = document.createElement('div');
        upcomingEl.classList.add('typing-line', 'upcoming');
        upcomingEl.innerHTML = upcomingLineText.replace(/ /g, ' ');
        if (upcomingLineText === " ") {
            upcomingEl.style.visibility = 'hidden';
        }
        fragmentUpcoming.appendChild(upcomingEl);
    }
    upcomingLinesArea.appendChild(fragmentUpcoming);
}


function handleInputEvent() {
    // If in "game development notice" mode, do nothing with input
    if (currentMode === 'game_dev_notice') {
        return;
    }
    const typedValue = typingInputField.value;
    const currentLineEl = document.getElementById('current-typing-line');
    if (!currentLineEl) return;
    const originalLine = linesToPractice[currentDisplayLineIndex] || "";

    playTypingSound();

    if (typedValue.length > 0) {
        if (!startTime && !currentMode.includes('Long')) {
            startTime = Date.now();
        } else if (!startTime && currentMode.includes('Long')) {
             startTime = Date.now();
        }

        if (originalLine !== null && !currentLineStartTime) {
            currentLineStartTime = Date.now();
        }
        if (startTime) updateStatsDisplay(false);

    } else if (startTime && typedValue.length === 0) {
        updateStatsDisplay(false);
    }

    handleHighlightUpdate(currentLineEl, typedValue, originalLine);
}

function handleHighlightUpdate(targetElement, typedValue, originalLine) {
    if (!targetElement) return;
    if (typeof originalLine !== 'string') { targetElement.innerHTML = ' '; return; }
    let formattedOriginalHTML = '';
    for (let i = 0; i < originalLine.length; i++) {
        const char = originalLine[i] === ' ' ? ' ' : originalLine[i];
        if (i < typedValue.length) {
            if (highlightEnabled && typedValue[i] !== originalLine[i]) {
                formattedOriginalHTML += `<span class="highlight">${char}</span>`;
            } else formattedOriginalHTML += `<strong>${char}</strong>`;
        } else formattedOriginalHTML += `<span class="untyped-char">${char}</span>`;
    }
    targetElement.innerHTML = formattedOriginalHTML || ' ';
}

function handleKeyDownEvent(e) {
    const typedValue = typingInputField.value;
    const originalLine = (currentMode !== 'game_dev_notice' && currentDisplayLineIndex < linesToPractice.length) ? linesToPractice[currentDisplayLineIndex] : null;

    if (e.key === 'Backspace' || (e.key === 'Shift' && !e.repeat && !e.altKey && !e.ctrlKey && !e.metaKey) ) {
        playTypingSound();
    }

    if (currentMode === 'game_dev_notice') { // Prevent typing actions in this mode
        if (e.key === 'Enter') e.preventDefault();
        return;
    }


    const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;
    if (e.key.length === 1 && !isModifierKey) {
        if (!startTime && !currentMode.includes('Long')) {
             startTime = Date.now();
             updateStatsDisplay(false);
        } else if (!startTime && currentMode.includes('Long')) {
             startTime = Date.now();
             updateStatsDisplay(false);
        }
        if (originalLine !== null && !currentLineStartTime) {
            currentLineStartTime = Date.now();
        }
    }

    if (e.key === 'Enter') {
        e.preventDefault();
        if (originalLine !== null && originalLine !== undefined) {
            processCurrentLineCompletion();
        } else if (currentDisplayLineIndex >= linesToPractice.length) {
            startPractice(currentMode, false);
        }
    } else if (e.key === ' ' && originalLine !== null && typedValue.length >= originalLine.length) {
        e.preventDefault();
        processCurrentLineCompletion();
    }
}

function processCurrentLineCompletion() {
    const typedValue = typingInputField.value;
    if (currentDisplayLineIndex >= linesToPractice.length) {
        startPractice(currentMode, false); return;
    }
    const originalLine = linesToPractice[currentDisplayLineIndex];
    if (originalLine === null || originalLine === undefined) {
        currentDisplayLineIndex++;
        if (currentDisplayLineIndex < linesToPractice.length) renderTypingLayout();
        else startPractice(currentMode, false);
        return;
    }

    let lineCorrectChars = 0; let lineMistypedCharsOnThisLine = 0;
    for (let i = 0; i < originalLine.length; i++) {
        if (i < typedValue.length) {
            if (typedValue[i] === originalLine[i]) lineCorrectChars++;
            else lineMistypedCharsOnThisLine++;
        } else {
            lineMistypedCharsOnThisLine++;
        }
    }
    if (typedValue.length > originalLine.length) {
        lineMistypedCharsOnThisLine += (typedValue.length - originalLine.length);
    }

    currentArticleCorrectChars += lineCorrectChars;
    sessionTotalCorrectChars += lineCorrectChars;
    sessionTotalMistypedChars += lineMistypedCharsOnThisLine;
    sessionTotalValidChars += originalLine.length;

    const timeSourceForCalc = currentMode.includes('Long') ? startTime : (currentLineStartTime || startTime);
    if (timeSourceForCalc) {
        const elapsedMinutes = (Date.now() - timeSourceForCalc) / 60000;
        const charsForSpeed = currentMode.includes('Long') ? currentArticleCorrectChars : lineCorrectChars;

        if (elapsedMinutes > 0.0001 && charsForSpeed > 0) {
            lastArticleSpeed = Math.round((charsForSpeed / elapsedMinutes) * (currentMode.includes('kor') ? KOR_SPEED_FACTOR : 1));
        } else {
            lastArticleSpeed = 0;
        }

        if (lastArticleSpeed > 0 && lastArticleSpeed < 5000) {
            overallAvgSpeedLog.push(lastArticleSpeed);
            if (lastArticleSpeed > overallMaxSpeed) overallMaxSpeed = lastArticleSpeed;
        }
    }

    currentDisplayLineIndex++;
    if(typingInputField) typingInputField.value = '';
    currentLineStartTime = null;

    if (currentMode.includes('Long')) {
    } else {
        currentArticleCorrectChars = 0;
        startTime = null;
    }

    if (currentDisplayLineIndex < linesToPractice.length) {
        renderTypingLayout();
        if(resultEl) resultEl.textContent = '계속하세요!';
        updateStatsDisplay(false);
        updateProgressBar();
        setTimeout(() => { if(typingInputField) typingInputField.focus(); }, 50);
    } else {
        updateStatsDisplay(false);
        updateProgressBar();
        if(resultEl) resultEl.textContent = '새로운 문제를 불러옵니다...';
        if (currentMode.includes('Long')) {
            currentArticleCorrectChars = 0;
            startTime = null;
        }
        setTimeout(() => startPractice(currentMode, false), 300);
    }
}

function updateStatsDisplay(isNewArticleOrSessionReset = false) {
  const statsElements = {
    speed: document.getElementById('speedStat'), accuracy: document.getElementById('accuracyStat'),
    avg: document.getElementById('avgSpeedStat'), max: document.getElementById('maxSpeedStat')
  };
  if (!Object.values(statsElements).every(el => el)) return;

  let currentSpeedToShow = lastArticleSpeed;

  if (isNewArticleOrSessionReset && sessionResetInProgress) {
      currentSpeedToShow = 0;
  } else if (currentMode.includes('Long') && startTime && currentArticleCorrectChars > 0 && currentDisplayLineIndex < linesToPractice.length) {
      const elapsedMinutes = (Date.now() - startTime) / 60000;
      if (elapsedMinutes > 0.0001) {
          currentSpeedToShow = Math.round((currentArticleCorrectChars / elapsedMinutes) * (currentMode.includes('kor') ? KOR_SPEED_FACTOR : 1));
      }
  } else if (isNewArticleOrSessionReset) {
      currentSpeedToShow = lastArticleSpeed;
  }

  statsElements.speed.textContent = `${currentSpeedToShow} 타/분`;

  let accuracy = 0;
  if (sessionResetInProgress) accuracy = 0;
  else if (sessionTotalValidChars > 0) {
    accuracy = Math.round((sessionTotalCorrectChars / sessionTotalValidChars) * 100);
    accuracy = Math.max(0, Math.min(accuracy, 100));
  }
  else if (isNewArticleOrSessionReset) accuracy = 0;
  statsElements.accuracy.textContent = `${accuracy}%`;

  let finalOverallAverageSpeed = 0;
  if (sessionResetInProgress) finalOverallAverageSpeed = 0;
  else if (overallAvgSpeedLog.length > 0) {
      finalOverallAverageSpeed = Math.round(overallAvgSpeedLog.reduce((a,b) => a+b,0) / overallAvgSpeedLog.length);
  }
  statsElements.avg.textContent = `${finalOverallAverageSpeed} 타/분`;

  let currentOverallMaxSpeed = 0;
  if(sessionResetInProgress) currentOverallMaxSpeed = 0;
  else currentOverallMaxSpeed = overallMaxSpeed;
  statsElements.max.textContent = `${currentOverallMaxSpeed} 타/분`;
}

function updateProgressBar() {
    if (progressBarEl && progressBarContainerEl && linesToPractice.length > 0 && currentMode.includes('Long')) {
        const progress = (currentDisplayLineIndex / linesToPractice.length) * 100;
        progressBarEl.style.width = `${Math.min(progress, 100)}%`;
    } else if (progressBarEl) {
        progressBarEl.style.width = '0%';
    }
}

function playTypingSound() {
  if (!soundEnabled || !currentSoundPack || !soundFiles[currentSoundPack] || !audioPool[currentSoundPack]) return;

  const soundPackSounds = soundFiles[currentSoundPack];
  const currentAudioPoolForPack = audioPool[currentSoundPack];

  if (soundPackSounds.length === 0 || currentAudioPoolForPack.length === 0) return;

  const soundSrc = getRandom(soundPackSounds);
  if (!soundSrc) return;

  if (audioPointer[currentSoundPack] === undefined || audioPointer[currentSoundPack] === null || audioPointer[currentSoundPack] >= currentAudioPoolForPack.length) {
      audioPointer[currentSoundPack] = 0;
  }

  let audioToPlay = currentAudioPoolForPack[audioPointer[currentSoundPack]];
  audioPointer[currentSoundPack] = (audioPointer[currentSoundPack] + 1) % currentAudioPoolForPack.length;

  if (audioToPlay && !audioToPlay.paused) {
    audioToPlay.pause();
    audioToPlay.currentTime = 0;
  }
  if (audioToPlay) {
    audioToPlay.src = soundSrc;

    const playPromise = audioToPlay.play();
    if (playPromise !== undefined) {
      playPromise.catch(error => { /* console.warn("Audio play error:", error); */ });
    }
  } else {
    initializeAudioPoolForPack(currentSoundPack);
  }
}
</script>
</body>
</html>
